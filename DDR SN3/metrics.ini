[Global]
FallbackTheme=_fallback

[Common]
InitialScreen="ScreenSelfTest"
FirstAttractScreen="ScreenCompany"
StepsTypesToHide="dance-threepanel,lights-cabinet"

PercentScoreDecimalPlaces=1
AutoSetStyle=false

ScreenWidth=1
ScreenHeight=480

[ProfileManager]
# I wouldn't change these either.
FixedProfiles=false
NumFixedProfiles=1

[SongManager]
ExtraStagePlayerModifiers=""
ExtraStageStageModifiers="failimmediate,4lives"
OMESPlayerModifiers=""
OMESStageModifiers="failimmediate,1lives"

ExtraColorMeter=2147483647
NumSongGroupColors = 7
SongGroupColor1 = color "#FFFFFF"
SongGroupColor2 = color "#00CC00"
SongGroupColor3 = color "#FFFF00"
SongGroupColor4 = color "#33CCFF"
SongGroupColor5 = color "#FF00FF"
SongGroupColor6 = color "#FF9933"
SongGroupColor7 = color "#FF0000"

[UnlockManager]
AutoLockChallengeSteps=false
SongsNotAdditional=false
UnlockNames=
Unlock1Command=

[GameState]
DefaultSort="Group"
DefaultSong="/Songs/DDR SuperNOVA 3/Acapella"
# How good of a grade you have to get to get an ES/OMES. Locked to an 'AA'
# note: we don't actually do this here now
GradeTierForExtra1="Grade_Tier20"
GradeTierForExtra2="Grade_Tier20"
# and how difficult that song you got has to be
MinDifficultyForExtra="Difficulty_Hard"
# System Direction
AreStagePlayerModsForced=AreStagePlayerModsForced
AreStageSongModsForced=AreStageSongModsForced
# Let players join while you play if they put in some coins
# aw, c'mon.
AllowLateJoin=true
# Various feats that you can earn
ProfileRecordFeats=true
CategoryRecordFeats=true
# Disallow bad names
UseNameBlacklist=false
AllowExtra=true
AllowExtra2=true
# I'm pretty sure SN2 onward let you change difficulty, at least on ES
LockExtraStageSelection=false
# [sm-ssc] Normally, in event mode, the premium value is ignored. Set this
# metric to true to re-gain that behavior.
DisablePremiumInEventMode=false
# Let edit steps be allowed for earning extra stages.
EditAllowedForExtra=false

[CodeDetector]
# For Future Reference:
# @ = Holding
# - = In Conjuction With / Then
# ~ = Released
# + = At The Same Time
ModeMenu1=""
ModeMenu2=""
CloseCurrentFolder="UP-DOWN"
PrevSteps2=GetPrevSteps()
NextSteps2=GetNextSteps()

[NoteField]
#For screen filter
ShowBoard = true
ShowBeatBars = ShowBeatBars()

[Gameplay]
UseInternalScoring = false
ComboIsPerRow = true
MissComboIsPerRow = true
MinScoreToContinueCombo=MinimumTNSForCombo()
MinScoreToMaintainCombo=MinimumTNSForCombo()
ToastyTriggersAt=1000
ToastyMinTNS='TapNoteScore_W3'

[LifeMeterBar]
OverOnCommand=
ForceLifeDifficultyOnExtraStage=true
MinScoreToKeepLife='TapNoteScore_W4'

[ScoreKeeperRave]

[ScoreKeeperNormal]
GradeWeightHeld=100
GradeWeightHitMine=0
GradeWeightMissedHold=0
GradeWeightLetGo=0
GradeWeightW1=100
GradeWeightW2=99
GradeWeightW3=49
GradeWeightW4=0
GradeWeightW5=0
GradeWeightMiss=0

[PlayerStageStats]
# Approximate DDR grading (Expert)
GradePercentTier01=1.000000
GradePercentTier02=0.990000
GradePercentTier03=0.950000
GradePercentTier04=0.900000
GradePercentTier05=0.800000
GradePercentTier06=0.700000
GradePercentTier07=-99999.000000
GradeTier01IsAllW2s=false
GradeTier02IsAllW2s=false
GradeTier02IsFullCombo=false
NumGradeTiersUsed=7

[Background]
ShowDancingCharacters=false

[ScreenSelfTest]
Class="ScreenSplash"
Fallback="ScreenSplash"
PrepareScreen="ScreenCompany"
NextScreen="ScreenCompany"
AllowStartToSkip=true

[ScreenSystemLayer]
ShowCreditDisplay=true
CreditsJoinOnly=false
ShowCoinsAndCredits=true

CreditsP1X=SCREEN_LEFT+102
CreditsP1Y=SCREEN_BOTTOM-10
CreditsP1RefreshCreditTextMessageCommand=playcommand,"UpdateText";
CreditsP1CoinInsertedMessageCommand=playcommand,"UpdateText";
CreditsP1CoinInsertedMessageCommand=playcommand,"UpdateText";
CreditsP1PlayerJoinedMessageCommand=playcommand,"UpdateText";
CreditsP1ScreenChangedMessageCommand=playcommand,"UpdateVisible";queuecommand,"On"
CreditsP1OnCommand=maxwidth,325;zoom,0.8;strokecolor,color("#000000")
CreditsP1OffCommand=

CreditsP2X=SCREEN_RIGHT-102
CreditsP2Y=SCREEN_BOTTOM-10
CreditsP2RefreshCreditTextMessageCommand=playcommand,"UpdateText";
CreditsP2CoinInsertedMessageCommand=playcommand,"UpdateText";
CreditsP2PlayerJoinedMessageCommand=playcommand,"UpdateText";
CreditsP2ScreenChangedMessageCommand=playcommand,"UpdateVisible";queuecommand,"On"
CreditsP2OnCommand=maxwidth,325;zoom,0.8;strokecolor,color("#000000")
CreditsP2OffCommand=


ShowNetworkStatus=true
NetworkStatusX=SCREEN_CENTER_X
NetworkStatusY=SCREEN_BOTTOM-10
NetworkStatusOnCommand=halign,0.5
NetworkStatusOffCommand=linear,0.5;cropright,1

###########SCREEN ATTRACT SCREENS#####################
[ScreenAttract]
Class="ScreenAttract"
Fallback="ScreenWithMenuElementsBlank"
StartScreen=Branch.TitleMenu()
CancelScreen=Branch.TitleMenu()
#
LightsMode="LightsMode_Attract"
PlayMusic=false
#
ResetGameState=true
BackGoesToStartScreen=true
AttractVolume=true
#
TimerMetricsGroup="MenuTimerNoSound"
TimerStealth=true
ForceTimer=true
TimerOnCommand=visible,false

[ScreenCompany]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenWarning"
PrevScreen="ScreenCompany"
TimerMetricsGroup="MenuTimerNoSound"
TimerSeconds=10.5
ForceTimer=true
TimerStealth=true
PlayMusic=true

[ScreenWarning]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenMovie"
PrevScreen="ScreenCompany"
SecondsToShow=11.5

TimerSeconds=11.5
ForceTimer=true
TimerStealth=true

[ScreenMovie]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenLogo"
PrevScreen="ScreenTitleMenu"
TimerSeconds=25
TimerMetricsGroup="MenuTimerNoSound"

[ScreenLogo]
Fallback="ScreenAttract"
NextScreen="ScreenHowToPlay"
PlayMusic=true

TimerSeconds=30
ForceTimer=true
TimerStealth=true

[ScreenHowToPlay]
Class="ScreenHowToPlay"
Fallback="ScreenAttract"
NextScreen="ScreenDemonstration"
TimerSeconds=40
ForceTimer=true
TimerStealth=true
TimerMetricsGroup="MenuTimerNoSound"

UseLifeMeterBar=true
LifeMeterBarX=WideScale(SCREEN_CENTER_X-172,SCREEN_CENTER_X-237)
LifeMeterBarY=SCREEN_TOP+25
LifeMeterBarOnCommand=



UseCharacter=true
# XXX: not always Princess Zukin, just mostly.
CharacterName="5th Alice"
CharacterX=SCREEN_CENTER_X+176
CharacterY=-SCREEN_CENTER_Y+60
CharacterOnCommand=valign,1;diffusealpha,1;zoom,20

UsePad=false
PadX=SCREEN_CENTER_X-280
PadY=SCREEN_CENTER_Y+70
PadOnCommand=zoom,15;rotationy,180;sleep,2.0;linear,1.0;rotationy,360;zoom,20;addx,190;addy,80
#
PlayerX=WideScale(SCREEN_CENTER_X-175,SCREEN_CENTER_X-240)

NumW2s=2
NumMisses=6

[ScreenDemonstration]
NextScreen="ScreenCompany"
PrevScreen="ScreenHowToPlay"
DiffucultiesToShow="easy,medium"

ShowStageDisplay=false
StepsDisplayP1OnCommand=visible,false
StepsDisplayP2OnCommand=visible,false
ScoreP1OnCommand=visible,false
ScoreP2OnCommand=visible,false
PlayerOptionsP1OnCommand=visible,false
PlayerOptionsP2OnCommand=visible,false
LifeP1OnCommand=visible,false
LifeP2OnCommand=visible,false
PlayMusic=true
#
SecondsToShow=30
#######################################################################

[ScreenWithMenuElements]
ScreenInDelay=0
ScreenOutDelay=0

ShowHeader=false
HeaderX=SCREEN_LEFT
HeaderY=SCREEN_TOP+38
HeaderOffCommand=sleep,0.5;decelerate,0.2;addy,-76
HeaderOnCommand=draworder,90;addy,-76;sleep,0.2;decelerate,0.2;addy,76

ShowFooter=false
FooterX=
FooterY=SCREEN_BOTTOM-26
FooterOnCommand=draworder,80;addy,54;sleep,0.2;decelerate,0.2;addy,-54
FooterOffCommand=decelerate,0.2;addy,54

ShowStyleIcon=false
StyleIconX=SCREEN_RIGHT-161
StyleIconY=SCREEN_TOP+29
StyleIconOffCommand=sleep,0;diffusealpha,0
StyleIconOnCommand=draworder,96;diffusealpha,0;sleep,0.792;diffusealpha,1

TimerX=SCREEN_RIGHT-50
TimerY=SCREEN_TOP+50
TimerOnCommand=draworder,96;zoom,0.8;shadowlength,0;addy,-76;sleep,0.2;decelerate,0.2;addy,76
TimerOffCommand=linear,0.1;zoom,0

[MenuTimer]
# todo: fix
MaxStallSeconds=8

Text1OnCommand=stopeffect;stoptweening;shadowlength,0;x,-15;
Text1FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); local digit = math.floor(fSeconds/10); return tostring(digit) end
Text1OffCommand=settext," "
Text2OnCommand=stopeffect;stoptweening;shadowlength,0;x,15;
Text2FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); return tostring(fSeconds%10) end
Text2OffCommand=settext," "

# xxx: is it 10 or is it 5?
WarningBeepStart=5
WarningStart=6
# warning commands rule, not
Warning6Command=stoptweening;sleep,0.8;linear,0.2;zoomx,0
Warning5Command=stoptweening;zoomx,0;linear,0.2;zoomx,1;sleep,0.6;linear,0.2;zoomx,0
Warning4Command=stoptweening;zoomx,0;linear,0.2;zoomx,1;sleep,0.6;linear,0.2;zoomx,0
Warning3Command=stoptweening;zoomx,0;linear,0.2;zoomx,1;sleep,0.6;linear,0.2;zoomx,0
Warning2Command=stoptweening;zoomx,0;linear,0.2;zoomx,1;sleep,0.6;linear,0.2;zoomx,0
Warning1Command=stoptweening;zoomx,0;linear,0.2;zoomx,1;sleep,0.6;linear,0.2;zoomx,0
Warning0Command=stoptweening;linear,0.2;zoomx,1;cropbottom,1;addy,30;linear,0.2;addy,-30;


[MenuTimerNoSound]
Fallback="MenuTimer"
HurryUpTransition=0
WarningBeepStart=0

####################################################################################
################################### OPTIONS ########################################
####################################################################################

[OptionsCursor]
LeftX=
LeftY=
LeftOnCommand=visible,false
MiddleX=
MiddleY=
MiddleOnCommand=visible,false
RightX=
RightY=
RightOnCommand=visible,false
CanGoLeftX=
CanGoLeftY=
CanGoLeftOnCommand=visible,false
CanGoRightX=
CanGoRightY=
CanGoRightOnCommand=visible,false

[ScreenOptions]
ShowHeader=true
ShowFooter=true
ScreenDelayOut=0

NumRowsShown=5
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y((SCREEN_CENTER_Y-159)+(30*offsetFromCenter)) \
end

PageOnCommand=
PageOffCommand=
ContainerOnCommand=
ContainerOffCommand=
OptionRowNormalMetricsGroup="OptionRow"
CursorTweenSeconds=0.15

[ScreenOptionsService]
LineNames="Theme,GameType,Appearance,UI,Arcade,Sync,GraphicSound,InputOptions,KeyConfig,Network,Profiles,Advanced,Reload,Credits"
LineTheme="gamecommand;screen,ScreenThemeOptions;name,Theme Options"

ScreenOutDelay=0
NumRowsShown=7
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y((SCREEN_CENTER_Y-159)+(30*offsetFromCenter)) \
end

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_BOTTOM-93
ExplanationTogetherOnCommand=shadowlength,0;zoom,0.62;wrapwidthpixels,1000;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

SeparateExitRow=true
SeparateExitRowX=SCREEN_LEFT+10
SeparateExitRowY=SCREEN_CENTER_Y+50

[OptionRow]
TitleX=SCREEN_LEFT+25
TitleY=
TitleOnCommand=zoom,0.8;halign,0
TitleGainFocusCommand=diffuse,color("#14FE00");
TitleLoseFocusCommand=diffuse,color("#ffffff");
ShowModIcons=false

ItemsStartX=SCREEN_CENTER_X-110
ItemsEndX=SCREEN_CENTER_X-110

ItemsGapX=14
ItemsMinBaseZoom=1
ItemOnCommand=uppercase,true;shadowlength,0;zoom,0.8
ItemGainFocusCommand=
ItemLoseFocusCommand=

ItemsLongRowP1X=SCREEN_CENTER_X-60
ItemsLongRowP2X=SCREEN_CENTER_X+100
ItemsLongRowSharedX=SCREEN_CENTER_X

ColorSelected=color("#14FE00")
ColorNotSelected=color("#ffffff")
ColorDisabled=color("0.5,0.5,0.5,1")

[OptionRowService]
TitleX=SCREEN_LEFT+25
TitleY=-1
TitleOnCommand=halign,0;shadowlength,1;maxwidth,600;zoom,0.8
TitleGainFocusCommand=diffuse,color("#14FE00");
TitleLoseFocusCommand=diffuse,color("#ffffff");

ItemsStartX=SCREEN_CENTER_X-160
ItemsEndX=SCREEN_CENTER_X+320

ItemsGapX=12
ItemsMinBaseZoom=2.5
ItemOnCommand=uppercase,true;shadowlength,0;zoom,1;
ItemGainFocusCommand=
ItemLoseFocusCommand=

ItemsLongRowP1X=SCREEN_CENTER_X-60
ItemsLongRowP2X=SCREEN_CENTER_X+100
ItemsLongRowSharedX=SCREEN_CENTER_X

ColorSelected=color("#14FE00")
ColorNotSelected=color("#ffffff")
ColorDisabled=color("0.5,0.5,0.5,1")

[OptionRowServiceChild]
Fallback="OptionRowService"

TitleX=SCREEN_LEFT+25
TitleOnCommand=zoom,0.8;halign,0
TitleGainFocusCommand=diffuse,color("#14FE00");
TitleLoseFocusCommand=diffuse,color("#ffffff");

ColorSelected=color("#14FE00")
ColorNotSelected=color("#ffffff")
ColorDisabled=color("0.5,0.5,0.5,1")

ItemsStartX=SCREEN_CENTER_X-110
ItemsEndX=SCREEN_CENTER_X-110
ItemsGapX=14
ItemsMinBaseZoom=0.65
ItemsLongRowSharedX=SCREEN_CENTER_X
ItemOnCommand=uppercase,true;shadowlength,0;zoom,0.8

################################################################################
[ScreenOptionsServiceChild]
ShowFooter=false
ShowHelp=true
WaitForChildrenBeforeTweeningOut=true

OptionRowNormalMetricsGroup="OptionRowServiceChild"

TitleX=SCREEN_LEFT+40
TitleOnCommand=zoom,0.8;halign,0
TitleGainFocusCommand=diffuse,color("#14FE00");
TitleLoseFocusCommand=diffuse,color("#ffffff");

LineHighlightP1OnCommand=zoom,1;x,SCREEN_CENTER_X
LineHighlightP1ChangeCommand=visible,true
LineHighlightP1ChangeToExitCommand=visible,false
#
LineHighlightP2OnCommand=zoom,1;x,SCREEN_CENTER_X+120-203
LineHighlightP2ChangeCommand=visible,true
LineHighlightP2ChangeToExitCommand=visible,false

NumRowsShown=6
SeparateExitRow=true
ShowExitRow=false

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_BOTTOM-75
ExplanationTogetherOnCommand=shadowlength,0;zoom,0.45;wrapwidthpixels,1300;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

[OptionRowExit]
FrameOnCommand=visible,true;diffuse,Color("Red");zoom,0.8
FrameX=SCREEN_LEFT+120

ItemsMinBaseZoom=1
ItemOnCommand=shadowlength,1;zoom,0.8;diffuse,Color("White")
ItemGainFocusCommand=diffuse,Color("Red")
ItemLoseFocusCommand=diffuse,Color("White")
ColorSelected=Color("Red")
ColorNotSelected=Color("White")
ColorDisabled=Color("Red")

ItemsLongRowP1X=SCREEN_CENTER_X-1024
ItemsLongRowP2X=SCREEN_CENTER_X+1024
ItemsLongRowSharedX=SCREEN_LEFT+120

[OptionRowExitPlayer]
Fallback="OptionRow"
FrameOnCommand=visible,false
TitleOnCommand=visible,false
ItemOnCommand=visible,false

###############################################################################
[OptionRowPlayer]
Fallback="OptionRow"
ShowUnderlines=false

TitleX=SCREEN_CENTER_X
TitleY=
TitleOnCommand=zoomy,0.8;zoomx,0.9
TitleGainFocusCommand=diffuse,color("1,1,1,1");
TitleLoseFocusCommand=stopeffect;diffuse,color("#013c14");strokecolor,color("0,0.8,0,1")

FrameX=SCREEN_CENTER_X
FrameY=
FrameGainFocusCommand=diffuse,color("1,1,1,1");
FrameLoseFocusCommand=stopeffect;diffuse,color("0.375,0.5,0,1")

ItemsStartX=SCREEN_CENTER_X
ItemsEndX=SCREEN_CENTER_X

ItemsGapX=14
ItemsMinBaseZoom=0.6
ItemOnCommand=uppercase,true;draworder,100;zoom,0.8;maxwidth,236
ItemGainFocusCommand=
ItemLoseFocusCommand=

ItemsLongRowP1X=SCREEN_CENTER_X-200
ItemsLongRowP2X=SCREEN_CENTER_X+200
ItemsLongRowSharedX=SCREEN_CENTER_X-200
TweenSeconds=0.05
ColorSelected=color("#0cff00")
ColorNotSelected=color("0.34,0.34,0.34,1")
ColorDisabled=color("0.34,0.34,0.34,1")

[ScreenPlayerOptions]
ShowFooter=true
ShowHeader=true
ShowHelp=false
WaitForChildrenBeforeTweeningOut=true

#See 01 Other.lua for details, in short we don't *want* to enable the exit row but
#it is sometimes necessary -tertu
ShowExitRow=EnableExitRow()

InputMode="individual"
ForceAllPlayers=false
RepeatRate=12
RepeatDelay=0.25

NumRowsShown=13

RowInitCommand=
RowOnCommand=
RowOffCommand=
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y((SCREEN_CENTER_Y-160)+(20*offsetFromCenter)) \
end

ContainerOnCommand=addx,-SCREEN_WIDTH;accelerate,0.5;addx,SCREEN_WIDTH
ContainerOffCommand=sleep,0.2;accelerate,0.5;addx,SCREEN_WIDTH

ExplanationP1X=SCREEN_CENTER_X-280
ExplanationP1Y=SCREEN_CENTER_Y+135
ExplanationP2X=SCREEN_CENTER_X+10
ExplanationP2Y=SCREEN_CENTER_Y+135

LineHighlightP1OnCommand=draworder,-2
LineHighlightP1ChangeCommand=visible,true
LineHighlightP1ChangeToExitCommand=visible,false
LineHighlightP2OnCommand=draworder,-2
LineHighlightP2ChangeCommand=visible,true
LineHighlightP2ChangeToExitCommand=visible,false

ExplanationP1OnCommand=zoom,0.55;wrapwidthpixels,494;horizalign,left;strokecolor,Color("Black")
ExplanationP2OnCommand=zoom,0.55;wrapwidthpixels,494;horizalign,right;strokecolor,Color("Black")

OptionRowNormalMetricsGroup="OptionRowPlayer"
OptionRowExitMetricsGroup="OptionRowExitPlayer"

LineNames=PlayerOptionsLines()
Line1="list,Speed"
Line1C="lua,SpeedMods()"
Line1A="lua,ArbitrarySpeedMods()"
Line2="list,Accel"
Line3="list,Appearance"
Line4="list,Turn"
Line5="list,Hide"
Line6="list,Scroll"
Line7="list,NoteSkins"
Line8="list,Freeze"
Line9="list,Jump"
Line10="list,Remove"
Line11="lua,OptionRowScreenFilter()"
Line12="list,Risky"
Line13="lua,OptionRowCharacters()"

MoreX=SCREEN_CENTER_X
MoreY=SCREEN_CENTER_Y+58
MoreOnCommand=zoom,0.7
MoreExitSelectedP1Command=
MoreExitSelectedP2Command=
MoreExitUnselectedP1Command=
MoreExitUnselectedP2Command=

[ScreenPlayerOptionsPopUp]
Fallback="ScreenPlayerOptions"

[ScreenSongOptions]
Fallback="ScreenPlayerOptions"

[ScreenPlayerOptionsRestricted]
Fallback="ScreenPlayerOptions"
NextScreen="ScreenStageInformation"
LineNames="1,16,17,SF"
Line16="list,StepsLocked"
Line17="list,Characters"
LineSF="lua,OptionRowScreenFilter()"

[OptionRowExitPlayer]
Fallback="OptionRow"
FrameOnCommand=visible,false
TitleOnCommand=visible,false
ItemOnCommand=visible,false

[ScreenPlayerOptionsPopup]
Fallback="ScreenPlayerOptions"
ShowHeader=false
ShowFooter=false
TimerStealth=true
TimerSeconds=-1
ScreenOutDelay=1

##################################################################################
[ScreenOptionsMaster]
Fallback="ScreenOptions"
Class="ScreenOptionsMaster"
NoteSkinSortOrder=""

# ExitItem is an exit row with the "Exit" text as a menu item; ExitTitle
# uses the menu title.
ExitItem="1;together;SelectNone;showoneinrow"
ExitItemDefault=""
ExitItem,1="screen," .. Screen.Metric("NextScreen") .. ";name,ExitItem"

ExitTitle="1;together;SelectNone;showoneinrow"
ExitTitleDefault=""
ExitTitle,1="screen," .. Screen.Metric("NextScreen") .. ";name,ExitTitle"
# player options

SpeedExplanation="Speed"
SpeedExplanationFunction=GetSpeedExplanation
SpeedIcon=false
Speed="24"
SpeedDefault="mod,1x,no randomspeed"
Speed,1="mod,0.25x;name,x0.25"
Speed,2="mod,0.50x;name,x0.5"
Speed,3="mod,0.75x;name,x0.75"
Speed,4="mod,1x;name,x1"
Speed,5="mod,1.25x;name,x1.25"
Speed,6="mod,1.5x;name,x1.5"
Speed,7="mod,1.75x;name,x1.75"
Speed,8="mod,2x;name,x2"
Speed,9="mod,2.25x;name,x2.25"
Speed,10="mod,2.50x;name,x2.5"
Speed,11="mod,2.75x;name,x2.75"
Speed,12="mod,3x;name,x3"
Speed,13="mod,3.25x;name,x3.25"
Speed,14="mod,3.50x;name,x3.5"
Speed,15="mod,3.75x;name,x3.75"
Speed,16="mod,4x;name,x4"
Speed,17="mod,4.50x;name,x4.5"
Speed,18="mod,5x;name,x5"
Speed,19="mod,5.50x;name,x5.5"
Speed,20="mod,6x;name,x6"
Speed,21="mod,6.50x;name,x6.5"
Speed,22="mod,7x;name,x7"
Speed,23="mod,7.5x;name,x7.5"
Speed,24="mod,8x;name,x8"

AccelExplanation="Accel"
AccelIcon=false
Accel="2"
AccelDefault="mod,no boost,no brake,no wave,no expand,no boomerang"
Accel,1="name,Off"
Accel,2="mod,boost;name,On"

AppearanceExplanation="Appearance"
AppearanceIcon=false
Appearance="4"
AppearanceDefault="mod,no hidden,no sudden,no stealth,no blink,no randomvanish"
Appearance,1="name,Visible"
Appearance,2="mod,hidden;name,Hidden"
Appearance,3="mod,sudden;name,Sudden"
Appearance,4="mod,stealth;name,Stealth"

TurnExplanation="Turn"
TurnIcon=false
Turn="5"
TurnDefault="mod,no turn"
Turn,1="name,Off"
Turn,2="mod,mirror;name,Mirror"
Turn,3="mod,left;name,Left"
Turn,4="mod,right;name,Right"
Turn,5="mod,shuffle;name,Shuffle"

HideExplanation="Hide"
HideIcon=false
Hide="2"
HideDefault="mod,no dark"
Hide,1="name,Off"
Hide,2="mod,dark;name,On"

ScrollExplanation="Scroll"
ScrollIcon=false
Scroll="2"
ScrollDefault="mod,no reverse,no split,no alternate,no cross"
Scroll,1="name,Standard"
Scroll,2="mod,reverse;name,Reverse"

FreezeExplanation="Freeze"
FreezeIcon=false
Freeze="2"
FreezeDefault="mod,no noholds"
Freeze,1="name,On"
Freeze,2="mod,noholds;name,Off"

JumpExplanation="Jump"
JumpIcon=false
Jump="2"
JumpDefault="mod,no nojumps"
Jump,1="name,On"
Jump,2="mod,nojumps;name,Off"

RemoveExplanation="Remove"
RemoveIcon=false
Remove="2"
RemoveDefault="mod,no little"
Remove,1="name,Off"
Remove,2="mod,little;name,On"

JudgeExplanation=false
JudgeIcon=false
Judge="2"
JudgeDefault="mod,no blind"
Judge,1="mod,blind;name,Off"
Judge,2="name,On"

RiskyExplanation="Risky"
RiskyIcon=false
Risky="5"
RiskyDefault=""
Risky,1="mod,bar;mod,normal-drain;name,Normal"
Risky,2="mod,battery;mod,4 lives;mod,failimmediatecontinue;name,4 Lives"
Risky,3="mod,battery;mod,3 lives;mod,failimmediatecontinue;name,3 Lives"
Risky,4="mod,battery;mod,2 lives;mod,failimmediatecontinue;name,2 Lives"
Risky,5="mod,battery;mod,1 lives;mod,failimmediatecontinue;name,1 Life"

NoteSkinsExplanation=false
NoteSkinsIcon=false
CharactersExplanation=false
CharactersIcon=false
FilterExplanation="Filter"
FilterIcon="Filter"

###################################################################################
[ScreenTitleJoin]
NextScreen=Branch.StartGame()
ChoiceNames="Game"
# coin message
CoinMessageX=SCREEN_CENTER_X
CoinMessageY=SCREEN_CENTER_Y+120
CoinMessageOnCommand=diffuseshift;effectcolor1,color("0.5,0.5,0.5,1");effectcolor2,color("1,1,1,1");effectperiod,0.3
CoinMessageOffCommand=

# premium message
PremiumX=SCREEN_CENTER_X
PremiumY=SCREEN_CENTER_Y+160
PremiumOnCommand=
PremiumOffCommand=

FreeplayX=SCREEN_CENTER_X
FreeplayY=SCREEN_CENTER_Y+120
FreeplayOnCommand=diffuseshift;effectcolor1,color("0.5,0.5,0.5,1");effectcolor2,color("1,1,1,1");effectperiod,1.5

# things from ScreenTitleMenu
ScrollerOnCommand=visible,false
SongsOnCommand=visible,false
VersionOnCommand=visible,false
WarningOnCommand=visible,false

[ScreenSelectEndless]
Class="ScreenWithMenuElements"
Fallback="ScreenWithMenuElements"

[ScreenSelectEndlessLevel]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"

[ScreenDebugStartEndless]
Class="ScreenWithMenuElements"
PrevScreen="ScreenTitleMenu"
NextScreen="ScreenEndlessManager"
Fallback="ScreenWithMenuElements"

[ScreenEndlessManager]
Class="ScreenWithMenuElements"
PrevScreen="ScreenTitleMenu"
NextScreen="ScreenGameplayEndless"
Fallback="ScreenWithMenuElements"

[ScreenTitleMenu]

PrevScreen="ScreenCompany"
NextScreen=Branch.StartGame()

ChoiceNames=SN3Debug and "Game,Mission,Edit,Options,Shop,DLC,Exit,Logo,HTP,Credits" or "Game,Mission,Edit,Options,Shop,DLC,Exit"
ChoiceGame="applydefaultoptions;text,GAME MODE;screen,"..Branch.StartGame()
ChoiceEdit="text,EDIT MODE;screen,"..Branch.OptionsEdit()
ChoiceOptions="screen,ScreenOptionsService;text,OPTIONS"
ChoiceExit="screen,ScreenExit;text,EXIT"
ChoiceDLC="text,DLC;urlnoexit,http://midflightdigital.weebly.com/sn3-dlc.html"
ChoiceLogo="text,Logo;screen,ScreenLogo"
ChoiceShop="text,SHOP;screen,ScreenShop"
ChoiceMission="text,SPECTRAL MASTER MODE;screen,ScreenMissionSelect"
ChoiceHTP="text,How To Play;screen,ScreenHowToPlay"
ChoiceCredits="text,Credits;screen,ScreenCredits"

ScrollerX=WideScale(SCREEN_CENTER_X+40,SCREEN_RIGHT-320)
ScrollerY=SCREEN_TOP+40
ScrollerOnCommand=valign,0;zoom,1;diffuse,color("#009900");addx,320;shadowlength,2;linear,0.264;diffuse,color("#009900");addx,-320
ScrollerOffCommand=accelerate,0.2;addx,320

ScrollerSecondsPerItem=0
ScrollerNumItemsToDraw=40
ScrollerTransform=function(self,offset,itemIndex,numItems) self:y(28*(itemIndex)) end

VersionX=SCREEN_RIGHT-20
VersionY=SCREEN_TOP+20
VersionOnCommand=halign,1;diffuse,color("0.6,0.6,0.6,1");zoom,0.5;shadowlength,2

[ScreenShop]
Class="ScreenSplash"
Fallback="ScreenSplash"
PrevScreen=Branch.TitleMenu()
ForceTimer=false
TimerStealth=true
TimerSeconds=9000

[ScreenMissionSelect]
Class="ScreenSplash"
Fallback="ScreenSplash"
PrevScreen=Branch.TitleMenu()
ForceTimer=false
TimerStealth=true
TimerSeconds=9000

[ScreenCaution]
Class="ScreenSplash"
Fallback="ScreenSplash"
PrepareScreens="ScreenSelectStyle"
NextScreen="ScreenProfileLoad"
PrevScreen=Branch.TitleMenu()
AllowStartToSkip=true

ForceTimer=true
TimerStealth=true
TimerSeconds=3.5

[ScreenSelectStyle]
ShowHeader=true
ShowFooter=true

ChoiceNames=StyleChoices()
DefaultChoice="1"

Choice1="style,single;name,Single;screen,ScreenSelectPlayMode"
Choice2="style,versus;name,Versus;screen,ScreenSelectPlayMode"
Choice3="style,double;name,Double;screen,ScreenSelectPlayMode"

ShowScroller=true
PerChoiceScrollElement=false
ScrollerX=
ScrollerY=
ScrollerOnCommand=draworder,101

ShowIcon=true
PerChoiceIconElement=false
UseIconMetrics=true

IconChoiceSingleX=SCREEN_RIGHT-280
IconChoiceSingleY=SCREEN_CENTER_Y+52
IconChoiceSingleOnCommand=draworder,99;
IconChoiceVersusX=SCREEN_RIGHT-180
IconChoiceVersusY=SCREEN_CENTER_Y+52
IconChoiceVersusOnCommand=draworder,99;
IconChoiceDoubleX=SCREEN_RIGHT-80
IconChoiceDoubleY=SCREEN_CENTER_Y+52
IconChoiceDoubleOnCommand=draworder,99;
IconChoiceCoupleX=
IconChoiceCoupleY=
IconChoiceCoupleOnCommand=draworder,99;
IconChoiceSoloX=
IconChoiceSoloY=
IconChoiceSoloOnCommand=draworder,99;

[ScreenSelectPlayMode]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen=Branch.TitleMenu()
ShowHeader=true
ShowFooter=true
ShowStyleIcon=true
ShowHelp=false
TimerSeconds=20
LateJoin=false

# Choice list:
# Arcade	Beginner, Easy, Medium, Hard, Nonstop, Oni
# Home		Beginner, Easy, Medium, Hard, Nonstop, Oni, Endless, Rave
ChoiceNames=(GAMESTATE:GetNumPlayersEnabled()==1) and "Starter,Standard,Battle,Course,Endless"\
or "Starter,Standard,Battle,Course"
DefaultChoice="Standard"
OptionOrderAuto="1:2,2:1"

ChoiceStarter="name,Starter;playmode,regular;lua,EnableStarterGameplayJunk;sort,Preferred;difficulty,beginner;screen,"..Branch.InstructionsNormal()
ChoiceStandard="name,Standard;playmode,regular;difficulty,easy;screen,"..Branch.InstructionsNormal()
ChoiceBattle="name,Battle;playmode,rave;screen,"..Branch.InstructionsNormal()
ChoiceCourse="name,Course;screen,ScreenSelectPlayCourseMode"
ChoiceEndless=(EndlessAvailableFlag) and "name,Endless;playmode,regular;screen,ScreenDebugStartEndless" or "name,Endless;sound,MusicWheel locked;lua,EndlessLockedMessage"

UpdateOnMesage=""

PerChoiceScrollElement=false
PerChoiceIconElement=false
#
ShowScroller=true
ShowIcon=false
WrapScroller=false
LoopScroller=false
ScrollerNumItemsToDraw=10
UseIconMetrics=true

ShowCursor=false
CursorOffsetXFromIcon=
CursorOffsetYFromIcon=
CursorOnCommand=draworder,102;zoom,0.85;addx,SCREEN_WIDTH;sleep,0.8;decelerate,0.4;addx,-SCREEN_WIDTH
CursorOffCommand=sleep,0.05;decelerate,0.25;addx,-SCREEN_WIDTH
CursorChangeCommand=finishtweening;sleep,0.05;decelerate,0.25
CursorSwitchToPage1Command=linear,0.165
CursorSwitchToPage2Command=linear,0.165

CursorP1OffsetXFromIcon=
CursorP1OffsetYFromIcon=
CursorP1OnCommand=draworder,50;zoom,0.8
CursorP1ChangeCommand=linear,1
CursorP1SwitchToPage1Command=linear,0.165
CursorP1SwitchToPage2Command=linear,0.165

CursorP2OffsetXFromIcon=
CursorP2OffsetYFromIcon=
CursorP2OnCommand=draworder,50;zoom,0.8
CursorP2ChangeCommand=linear,0.165
CursorP2SwitchToPage1Command=linear,0.165
CursorP2SwitchToPage2Command=linear,0.165

# ------- SCROLLER SETTING --- SINGLE VERSUS DOUBLE -- kenp
ScrollerSecondsPerItem=0.1
ScrollerX=WideScale(SCREEN_RIGHT-180,SCREEN_RIGHT-240)
ScrollerY=SCREEN_CENTER_Y

ScrollerTransform=function(self,ofs,i,n) \
	local t=ofs*math.pi*2/n; \
	local function GetZoom(ofs) \
		if math.abs(ofs) >= 1 then \
			return (10.0-math.abs(ofs)*3)/10; \
		else \
			return 0.7; \
		end; \
	end; \
	self:x(math.cos(t)*60); \
	self:y(ofs*80); \
	self:z(1-math.abs(ofs)); \
	self:zoom( GetZoom(ofs) ); \
end

ScrollerOnCommand=halign,1;zoom,0;sleep,0.4;decelerate,0.2;zoom,1
ScrollerOffCommand=decelerate,0.2;zoom,0

SharedSelection=true


# xxx: all positions need fixing

#- page 1 -#
IconChoiceStarterX=SCREEN_CENTER_X-256
IconChoiceStarterY=SCREEN_CENTER_Y+100
IconChoiceStarterOnCommand=draworder,101;zoom,0.8;rotationy,90;sleep,0.4;decelerate,0.2;rotationy,0
IconChoiceStarterOffCommand=sleep,0.05;decelerate,0.2;rotationy,90
IconChoiceStarterSwitchToPage1Command=
IconChoiceStarterSwitchToPage2Command=
#--#
IconChoiceStandardX=SCREEN_CENTER_X-128
IconChoiceStandardY=SCREEN_CENTER_Y+100
IconChoiceStandardOnCommand=draworder,101;zoom,0.8;rotationy,90;sleep,0.5;decelerate,0.2;rotationy,0
IconChoiceStandardOffCommand=sleep,0.1;decelerate,0.2;rotationy,90
IconChoiceStandardSwitchToPage1Command=
IconChoiceStandardSwitchToPage2Command=
#--#
IconChoiceBattleX=SCREEN_CENTER_X
IconChoiceBattleY=SCREEN_CENTER_Y+100
IconChoiceBattleOnCommand=draworder,101;zoom,0.8;rotationy,90;sleep,0.6;decelerate,0.2;rotationy,0
IconChoiceBattleOffCommand=sleep,0.15;decelerate,0.2;rotationy,90
IconChoiceBattleSwitchToPage1Command=
IconChoiceBattleSwitchToPage2Command=
#--#
IconChoiceCourseX=SCREEN_CENTER_X+128
IconChoiceCourseY=SCREEN_CENTER_Y+100
IconChoiceCourseOnCommand=draworder,101;zoom,0.8;rotationy,90;sleep,0.7;decelerate,0.2;rotationy,0
IconChoiceCourseOffCommand=sleep,0.2;decelerate,0.2;rotationy,90
IconChoiceCourseSwitchToPage1Command=
IconChoiceCourseSwitchToPage2Command=
#--#
IconChoiceEndlessX=SCREEN_CENTER_X+256
IconChoiceEndlessY=SCREEN_CENTER_Y+100
IconChoiceEndlessOnCommand=draworder,101;zoom,0.8;rotationy,90;sleep,0.8;decelerate,0.2;rotationy,0
IconChoiceEndlessOffCommand=sleep,0.25;decelerate,0.2;rotationy,90
IconChoiceEndlessSwitchToPage1Command=
IconChoiceEndlessSwitchToPage2Command=

[ScreenSelectPlayCourseMode]
#PersistScreens="ScreenSelectPlayCourseMode,ScreenSelectCourse"
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
NextScreen=Branch.GetGameInformationScreen
PrevScreen=Branch.TitleMenu()
TimerSeconds=40
ShowHeader=true
ShowFooter=true
PlayMusic=true
#
ScreenOutDelay=3
#
DefaultChoice="Extended"
ChoiceNames="Extended,Oni"
#
PerChoiceIconElement=false
#
ShowScroller=true
WrapScroller=true
ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y
ScrollerOnCommand=SetFastCatchup,true;zoom,0.8
ScrollerOffCommand=
#
ShowBackgroundFrame=true
BackgroundFrameX=SCREEN_CENTER_X
BackgroundFrameY=SCREEN_CENTER_Y-60
BackgroundFrameOnCommand=diffuse,Color("Black");diffusealpha,0.7
BackgroundFrameOffCommand=decelerate,0.8;y,SCREEN_CENTER_Y;sleep,2;linear,0.1;zoomy,0
#
ShowIcon=true
UseIconMetrics=true
#
IconGainFocusCommand=stoptweening;stopeffect;decelerate,0.125;zoom,0.5;
IconLoseFocusCommand=stoptweening;stopeffect;decelerate,0.125;zoom,0.3;
#
IconChoiceExtendedX=SCREEN_CENTER_X-120
IconChoiceExtendedY=SCREEN_CENTER_Y-58
IconChoiceExtendedOnCommand=zoom,0;bounceend,0.35;zoom,1
IconChoiceExtendedOffCommand=linear,0.1175;zoomy,0
#
IconChoiceOniX=SCREEN_CENTER_X+120
IconChoiceOniY=SCREEN_CENTER_Y-58
IconChoiceOniOnCommand=zoom,0;bounceend,0.35;zoom,1
IconChoiceOniOffCommand=linear,0.1175;zoomy,0

ChoiceExtended="applydefaultoptions;name,Extended;text,Extended;playmode,nonstop;screen,ScreenSelectCourse;setenv,sMode,Extended"
ChoiceOni="applydefaultoptions;name,Oni;text,Oni;playmode,oni;screen,ScreenSelectCourse;setenv,sMode,Oni"

[ScreenInstructions]
Fallback="ScreenSplash"
NextScreen=Branch.AfterInstructions()
PrevScreen=Branch.TitleMenu()
WaitForChildrenBeforeTweeningOut=true
AllowStartToSkip=true
TimerSeconds=4.5
TimerStealth=true
ForceTimer=true
ShowStyleIcon=false
ShowHeader=false
ShowFooter=false
ShowHelp=true
PlayMusic=false

[ScreenSelectMusicStarter]
Fallback="ScreenSelectMusic"
DefaultSort="Preferred"
MusicWheelType="StarterWheel"

[StarterWheel]
Fallback="MusicWheel"
SortOrders={ "SortOrder_Preferred" }

[ScreenSelectMusicRD]
Fallback="ScreenSelectMusic"

SampleMusicLoops=true
MusicWheelType="RDWheel"

HeaderOnCommand=draworder,122
HeaderOffCommand=
FooterOnCommand=draworder,122
FooterOffCommand=

MusicWheelX=SCREEN_CENTER_X
MusicWheelY=SCREEN_CENTER_Y+80
MusicWheelOnCommand=%function(self) \
	self:zoom(1); \
	self:draworder(-19); \
	self:fov(100); \
	self:vanishpoint(SCREEN_CENTER_X,SCREEN_CENTER_Y-90); \
	self:SetDrawByZPosition(true);\
end;

MusicWheelOffCommand=
NewSongOffCommand=
StageDisplayOffCommand=
SortDisplayOffCommand=

BPMDisplayX=SCREEN_CENTER_X
BPMDisplayY=SCREEN_CENTER_Y
BPMDisplayOnCommand=halign,0.5
BPMDisplayOffCommand=

PlayMusic=false

SampleMusicPreviewMode='SampleMusicPreviewMode_ScreenMusic'

#Banner
BannerFrameX=
BannerFrameY=
BannerFrameOnCommand=visible,false
BannerFrameOffCommand=

BannerX=
BannerY=
BannerOnCommand=visible,false
BannerOffCommand=

[ScreenSelectMusicExtra]
Fallback="ScreenSelectMusic"
DefaultSort="Preferred"


UsePlayerSelectMenu=true
SelectMenuAvailable=true
MusicWheelType="ExtraWheel"

[ExtraWheel]
Fallback="MusicWheel"

UseSectionsWithPreferredGroup=true

# xxx: ChallengeMeter,Genre,Length,Recent aren't in foonmix, but I'd like them
# to stick around anyways.
ModeMenuChoiceNames="Extra"
SortOrders={ "SortOrder_Preferred" }
ChoiceExtra=SortExtra()

[RDWheel]
Fallback="MusicWheel"
ShowRandom=false
ShowRoulette=false
ShowPortal=false
SwitchSeconds=0.05

RouletteColor=color("#FFFFFF")
RandomColor=color("#FFFFFF")

LockedInitialVelocity=9

ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	local function GetZoom(offsetFromCenter) \
		if math.abs(offsetFromCenter) >= 1 then \
			return 0.5; \
		else \
			return (10.0-math.abs(offsetFromCenter)*5)/10; \
		end; \
	end; \
	local function GetDistence(offsetFromCenter) \
		if offsetFromCenter >= 1 then \
			return offsetFromCenter*90+84; \
		elseif offsetFromCenter <= -1 then \
			return offsetFromCenter*90-84; \
		else \
			return 90*offsetFromCenter + 84*offsetFromCenter \
		end; \
	end; \
	local function GetRotationY(offsetFromCenter) \
		if offsetFromCenter > 0.9 then \
			return 64+(offsetFromCenter-0.9)*9.8; \
		elseif offsetFromCenter < -0.9 then \
			return -64+(offsetFromCenter+0.9)*9.8; \
		else \
			return offsetFromCenter*64/0.9; \
		end; \
	end; \
	local function GetRotationZ(offsetFromCenter) \
		if offsetFromCenter < 0 then \
			return -offsetFromCenter*0.5; \
		else \
			return 0; \
		end; \
	end; \
	local function GetRotationX(offsetFromCenter) \
		if math.abs(offsetFromCenter) < 0.1 then \
			return 0; \
		else \
			return 4; \
		end; \
	end; \
	self:linear(5.8); \
	self:x( GetDistence(offsetFromCenter) ); \
	self:y( -120 ); \
	self:z(1-math.abs(offsetFromCenter)); \
	self:draworder( math.abs(offsetFromCenter)*10 ); \
	self:zoom( GetZoom(offsetFromCenter) ); \
	self:rotationx( 0 );\
	self:rotationy( GetRotationY(offsetFromCenter) ); \
	self:rotationz( 0 ); \
	end;

NumWheelItems=13


HighlightOnCommand=visible,false



ScrollBarHeight=1
ScrollBarOnCommand=visible,false;x,9999;y,9999

NumSectionColors=1
SectionColor1=color("#FFFF20")

SortMenuColor=color("#FFFF20")

UseSectionsWithPreferredGroup=true


# xxx: ChallengeMeter,Genre,Length,Recent aren't in foonmix, but I'd like them
# to stick around anyways.
ModeMenuChoiceNames="Extra"
SortOrders={ "SortOrder_Preferred" }
ChoiceExtra=SortExtra()

[ScreenSelectMusic]
UsePlayerSelectMenu=true
SelectMenuAvailable=true
SelectMenuScreenName="ScreenPlayerOptionsPopup"
TimerSeconds=90

IdleCommentSeconds=20
HardCommentMeter=10

SampleMusicLoops=true
SampleMusicFallbackFadeInSeconds=0
SampleMusicFadeOutSeconds=0.2

SampleMusicDelayInit=1

ShowOptionsMessageSeconds=1.5
PlaySoundOnEnteringOptionsMenu=false

ShowHeader=true
HeaderY=SCREEN_TOP+38
HeaderOffCommand=decelerate,0.2;addy,-76
HeaderOnCommand=draworder,88;halign,0;addy,-76;sleep,0.264;decelerate,0.2;addy,76

ShowStyleIcon=true
StyleIconX=StylePosX()
StyleIconY=SCREEN_CENTER_Y-74
StyleIconOnCommand=zoom,0.8;draworder,90;addx,-500;sleep,0.264;decelerate,0.52;addx,500
StyleIconOffCommand=sleep,0.033;accelerate,0.33;addx,-500

ShowHelp=false
DoRouletteOnMenuTimer=true

ShowFooter=true

ShowDifficultyList=not GAMESTATE:IsCourseMode();
DifficultyListX=SCREEN_LEFT+120
DifficultyListY=SCREEN_CENTER_Y+100
DifficultyListOnCommand=zoom,0.85;draworder,90;addx,-400;sleep,0.32;addx,400
DifficultyListStartSelectingStepsMessageCommand=finishtweening;accelerate,0.2;zoom,1.1;decelerate,0.2;zoom,1;
DifficultyListOffCommand=sleep,0.033;accelerate,0.363;addx,-400

ShowNewSong=not GAMESTATE:IsCourseMode()
NewSongX=NewSongPosX()
NewSongY=SCREEN_CENTER_Y-41
NewSongOnCommand=draworder,99;playcommand,"Set"
NewSongOffCommand=bouncebegin,0.135;visible,false
NewSongShowCommand=finishtweening;visible,true
NewSongHideCommand=finishtweening;visible,false

#MusicWheel
MusicWheelX=WheelPosX()
MusicWheelY=SCREEN_CENTER_Y-16
MusicWheelOnCommand=rotationy,30;zoomx,1.16;addx,SCREEN_WIDTH/640*328;sleep,0.412;linear,0.196;addx,-(SCREEN_WIDTH/640*328)
MusicWheelOffCommand=sleep,0.020;linear,0.255;addx,SCREEN_WIDTH/640*328

#Player Mod Icons
ShowModIcons=false
ModIconsP1X=SCREEN_LEFT+5
ModIconsP1Y=SCREEN_BOTTOM-37
ModIconsP1OnCommand=draworder,2;addx,-400;sleep,0.264;sleep,0.139;decelerate,0.33;addx,400
ModIconsP1OffCommand=sleep,0.033;accelerate,0.363;addx,-400
ModIconsP2X=SCREEN_LEFT+169
ModIconsP2Y=SCREEN_BOTTOM-37
ModIconsP2OnCommand=draworder,2;addx,-400;sleep,0.264;sleep,0.139;decelerate,0.33;addx,400
ModIconsP2OffCommand=sleep,0.033;accelerate,0.363;addx,-400

#Banner
BannerFrameX=BannerFramePosX()
BannerFrameY=SCREEN_CENTER_Y-58
BannerFrameOnCommand=draworder,-1;addx,-500;sleep,0.264;decelerate,0.52;addx,500;sleep,0.1;linear,0
BannerFrameOffCommand=sleep,0.033;accelerate,0.33;addx,-500

BannerX=BannerPosX()
BannerY=SCREEN_CENTER_Y-124
BannerOnCommand=draworder,22;scaletoclipped,256,80;addx,-500;sleep,0.264;decelerate,0.52;addx,500
BannerOffCommand=sleep,0.033;accelerate,0.33;addx,-500

#CDTitle
CDTitleX=CDPosX()
CDTitleY=SCREEN_CENTER_Y-120
CDTitleOnCommand=draworder,99;zoom,0.5;addx,-280;sleep,0.450;linear,0.267;addx,274;linear,0.05;addx,-6;decelerate,0.116;addx,12;decelerate,0.067;addx,-4;decelerate,0.1;addx,4
CDTitleOffCommand=accelerate,0.316;addx,-280
CDTitleFrontCommand=spin;effectmagnitude,0,180,0;cullmode,'CullMode_Back'
CDTitleBackCommand=spin;effectmagnitude,0,180,0;cullmode,'CullMode_Front';diffuse,color("#333333")
CDTitleSpinSeconds=2.16

#StageDisplay
ShowStageDisplay=true
StageDisplayX=StagePosX()
StageDisplayY=SCREEN_CENTER_Y-74
StageDisplayOnCommand=draworder,5;halign,1;addx,-500;sleep,0.264;decelerate,0.52;addx,500;sleep,0.1;
StageDisplayOffCommand=sleep,0.033;accelerate,0.33;addx,-400

#BPMDisplay
ShowBPMDisplay=(not GAMESTATE:IsCourseMode()) and ThemePrefs.Get("LightMode");
BPMDisplayX=BPMNumPosX()
BPMDisplayY=SCREEN_CENTER_Y-74
BPMDisplayOnCommand=zoomx,1;zoomy,0.8;draworder,5;addx,-500;sleep,0.264;decelerate,0.52;addx,500;
BPMDisplayOffCommand=sleep,0.033;accelerate,0.33;addx,-400

#SortDisplay
ShowSortDisplay=true
SortDisplayX=WideScale(SCREEN_CENTER_X+240,SCREEN_CENTER_X+120)
SortDisplayY=SCREEN_TOP+30
SortDisplayOnCommand=draworder,89;diffusealpha,0;sleep,0.75;diffusealpha,1
SortDisplayOffCommand=accelerate,0.396;addx,380

#GrooveRadar
ShowGrooveRadar=not GAMESTATE:IsCourseMode();
GrooveRadarX=RadarPosX()
GrooveRadarY=SCREEN_CENTER_Y+16
GrooveRadarOnCommand=draworder,2;diffusealpha,0;addx,-400;sleep,0.1;linear,0.52;diffusealpha,0;addx,400;sleep,0.3;diffusealpha,1
GrooveRadarOffCommand=sleep,0.033;accelerate,0.33;addx,-400

#SongOptions
# Done in Lua
ShowSongOptions=true
SongOptionsX=SCREEN_LEFT+20
SongOptionsY=SCREEN_CENTER_Y-60
SongOptionsOnCommand=halign,0;zoom,0.5;shadowlength,2;diffusealpha,0;linear,0.5;diffusealpha,1
SongOptionsOffCommand=linear,0.5;diffusealpha,0

#StepsDisplay

#Balloon
BalloonX=BalloonPosX()
BalloonY=SCREEN_CENTER_Y-97
BalloonOnCommand=halign,1;;draworder,99;zoomy,0;sleep,0.264;sleep,0.558;decelerate,0.231;zoomy,1;bob;effectmagnitude,0,5,0
BalloonOffCommand=accelerate,0.231;zoomy,0
BalloonShowCommand=diffusealpha,1
BalloonHideCommand=diffusealpha,0

#Score
ScoreP1X=SCREEN_RIGHT-127
ScoreP1Y=SCREEN_CENTER_Y-41
ScoreP1OnCommand=visible,false
ScoreP1OffCommand=accelerate,0.396;addx,380
ScoreP2X=SCREEN_RIGHT-127
ScoreP2Y=SCREEN_CENTER_Y+10
ScoreP2OnCommand=visible,false
ScoreP2OffCommand=accelerate,0.396;addx,380

NullScoreString=string.format("% 7.0f",0)

NumSectionColors=1
SectionColor1=color("#FFFF20")

[MusicWheel]
ShowRandom=true
ShowRoulette=true
ShowPortal=false
SwitchSeconds=0.05

RouletteColor=color("#FFFFFF")
RandomColor=color("#FFFFFF")

LockedInitialVelocity=9



# 3.9-style metrics used in the wheel transform
NumWheelItems=13
ItemCurveX=32
ItemSpacingY=60
Wheel3DRadius=220
CirclePercent=0.5
CenterPaddingY = 5

# 3d music wheel
ItemTransformFunction=curved_wheel_transform

MusicWheelItemFinishOffCommand=sleep,0.016;accelerate,0.25;addx,386
MusicWheelItemFinishOnCommand=sleep,0.25;addx,-380
MusicWheelItemStartOnCommand=;addx,380
MusicWheelItemSortOnCommand=addx,SCREEN_CENTER_X;sleep,0.15;decelerate,0.15;addx,-SCREEN_CENTER_X;
MusicWheelItemSortOffCommand=accelerate,0.15;addx,SCREEN_CENTER_X
WheelItemOnDelayOffset=0.04
WheelItemOffDelayOffset=0
WheelItemLockedColor=Color("Black")

HighlightOnCommand=draworder,-1;addx,330;sleep,0.6;decelerate,0.34;addx,-330



ScrollBarHeight=SCREEN_CENTER_Y+86
ScrollBarOnCommand=%WheelScrollOn

NumSectionColors=1
SectionColor1=color("#FFFF20")

SortMenuColor=color("#FFFF20")

UseSectionsWithPreferredGroup=false

# xxx: ChallengeMeter,Genre,Length,Recent aren't in foonmix, but I'd like them
# to stick around anyways.
SortOrders={ "SortOrder_Group", "SortOrder_Title", "SortOrder_BPM", "SortOrder_TopGrades" }

CustomWheelItemNames=(GAMESTATE:IsAnExtraStage() and SN3Debug) and "RDG" or ""

CustomWheelItemRDG="screen,ScreenSelectMusicRD"

RDGColor="#FFFFFF"


[CourseWheel]
ShowRandom=false
ShowRoulette=false
ShowPortal=false

NumWheelItems=5
ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:setsize(400,300)\
	self:x( (offsetFromCenter/math.pi)*-25 ); \
	self:y(offsetFromCenter * _screen.h/15) \
end

[MusicWheelItem]
WheelNotifyIconX=-155
WheelNotifyIconY=0
WheelNotifyIconOnCommand=

SongNameX=9000
SongNameOnCommand=zoom,0.8

SectionCollapsedX=9000
SectionCollapsedOnCommand=zoom,1.0;
SectionExpandedX=9000
SectionExpandedOnCommand=zoom,1.0;

ShowSectionCount=false
SectionCountX=999
SectionCountY=0
SectionCountOnCommand=halign,1;zoom,0.75

RouletteX=-130
RouletteY=0
RouletteOnCommand=zoom,1;uppercase,true;halign,0

RandomX=-130
RandomY=0
RandomOnCommand=zoom,1;uppercase,true;halign,0

CourseX=9000
CourseY=0
CourseOnCommand=

SortX=9000
SortY=0
SortOnCommand=shadowlength,0;zoom,1.4;halign,0

GradeP1X=120
GradeP1Y=-20
GradeP2X=120
GradeP2Y=20

[TextBanner]
TitleOnCommand=halign,0;x,9000
SubtitleOnCommand=halign,0;x,9000
ArtistOnCommand=halign,0;x,9000
ArtistPrependString=""
AfterSetCommand=%TextBannerAfterSet

[TextBannerEditMode]
Fallback="TextBannerGameplay"
AfterSetCommand=%TextBannerAfterSet

[TextBannerGameplay]
TitleOnCommand=halign,0;wrapwidthpixels,2^24
SubtitleOnCommand=halign,0;wrapwidthpixels,2^24
ArtistOnCommand=halign,0;wrapwidthpixels,2^24
ArtistPrependString=""
AfterSetCommand=%TextBannerGameplayAfterSet

[WheelNotifyIcon]
ShowTraining=true

[BPMDisplay]
NoBpmText="000"
ShowQMarksInRandomCycle = false

Cycle=1
SetNoBpmCommand=diffuse,color("#06ff00")
SetNormalCommand=diffuse,color("#06ff00")
SetChangeCommand=diffuse,color("#06ff00")
SetRandomCommand=diffuse,color("1,0,0,1")
SetExtraCommand=diffuse,color("1,0,0,1")

[DifficultyList]
ItemsSpacingY=24
NumShownItems=8

[StepsDisplayListRow]
# TODO: Make this use DifficultyList?
CapitalizeDifficultyNames=false
NumShownItems=5
ItemsSpacingY=24
MoveCommand=decelerate,0.05

FrameX=

FrameSetCommand=%function(self,param) \
	if param.CustomDifficulty and param.CustomDifficulty ~= "" then \
		self:diffuse(ColorMidTone( CustomDifficultyToColor(param.CustomDifficulty) )); \
	else \
		self:diffuse(color('1,1,1,1')); \
	end; \
end;
#
NumTicks=10
MaxTicks=10
#
ShowMeter=true
MeterX=56
MeterOnCommand=shadowlength,1;zoom,0.65;textglowmode,'TextGlowMode_Inner';
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty and param.CustomDifficulty ~= "" then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)); \
		self:shadowcolor(CustomDifficultyToDarkColor(param.CustomDifficulty)); \
	end; \
	if param.Meter then \
		if param.Meter >= 10 then \
			self:textglowmode('TextGlowMode_Inner'); \
			self:glowshift(); \
		else \
			self:stopeffect(); \
		end; \
	end; \
end;
#
ShowDescription=false
DescriptionX=ThemePrefs.Get("AutoSetStyle") and (-64-8+20) or (-64-8)
DescriptionOnCommand=shadowlength,1;horizalign,left;zoom,0.65;maxwidth,128+8-20;uppercase,true;
DescriptionSetCommand=%function(self,param) \
	if self:GetText() == "" then \
		self:settext("Edit"); \
	end; \
	if param.CustomDifficulty and param.CustomDifficulty ~= "" then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)); \
		self:shadowcolor(CustomDifficultyToDarkColor(param.CustomDifficulty)); \
	end; \
end;
#
ShowAutogen=true
AutogenX=0
AutogenY=0
AutogenOnCommand=diffuseshift;effectcolor1,Color.Alpha( Color("Green") , 0.5 );effectcolor2,ColorMidTone( Color("Green") );
#AutogenOnCommand=zoom,0.75;
#
ShowStepsType=ThemePrefs.Get("AutoSetStyle")
StepsTypeX=-64-8
StepsTypeY=0
StepsTypeOnCommand=
StepsTypeSetCommand=

[Banner]
ScrollRandom=false
ScrollRoulette=true

[RadarValues]

[GrooveRadar]
#we don't use the groove radar labels but these metrics aren't provided by fallback -FlameyBoy
#the labels coords change where the corners of the radar values are -Inorizushi
#seriously? what (that said we don't use this anymore) -tertu
#Stream
Label1X=8
Label1Y=-98
#Voltage
Label2X=-101
Label2Y=-30
#Air
Label3X=-80
Label3Y=72
#Frezze
Label4X=104
Label4Y=72
#Chaos
Label5X=116
Label5Y=-30

RadarValueMapP1OnCommand=diffuse,PlayerColor(PLAYER_1);glowshift;effectcolor1,PlayerColor(PLAYER_1);effectcolor2,color "#FFFFFF"
RadarValueMapP2OnCommand=diffuse,PlayerColor(PLAYER_2);glowshift;effectcolor1,PlayerColor(PLAYER_2);effectcolor2,color "#FFFFFF"
EdgeWidth=0
CenterAlpha=0

[ModIcon]
TextOnCommand=zoom,0.5;maxwidth,70;uppercase,true;shadowlength,0;
CropTextToWidth=32
StopWords="1X,default,Overhead,Off,Normal,nomines"

[ModIconSelectMusic]
Fallback="ModIcon"
TextX=
TextY=
TextOnCommand=zoom,0.8;maxwidth,14;uppercase,true

[ModIconRowSelectMusic]
Fallback="ModIconRow"
NumModIcons=7
SpacingX=80
SpacingY=0
ModIconMetricsGroup="ModIconSelectMusic"

[ModIconRowSelectMusicP1]
Fallback="ModIconRowSelectMusic"
ModIconMetricsGroup="ModIconSelectMusicP1"

[ModIconRowSelectMusicP2]
Fallback="ModIconRowSelectMusic"
ModIconMetricsGroup="ModIconSelectMusicP2"

[ModIconSelectMusicP1]
Fallback="ModIconSelectMusic"

[ModIconSelectMusicP2]
Fallback="ModIconSelectMusic"

[ScreenSelectCourse]
Fallback="ScreenSelectMusic"
ShowSortDisplay=false

MusicWheelType="MusicWheel"

ExplanationX=SCREEN_RIGHT-160
ExplanationY=SCREEN_CENTER_Y+80
ExplanationOnCommand=visible,false
ExplanationOffCommand=

ScoreP1OnCommand=visible,false
ScoreP2OnCommand=visible,false

NumCourseStagesX=SCREEN_CENTER_X-9999
NumCourseStagesY=SCREEN_CENTER_Y-9999
NumCourseStagesOnCommand=draworder,82;shadowlength,0;addx,-SCREEN_WIDTH;bounceend,0.5;addx,SCREEN_WIDTH
NumCourseStagesOffCommand=bouncebegin,0.5;addx,-SCREEN_WIDTH

CourseTimeX=SCREEN_CENTER_X-9999
CourseTimeY=SCREEN_CENTER_Y-9999
CourseTimeOnCommand=draworder,82;shadowlength,0;addx,-SCREEN_WIDTH;bounceend,0.5;addx,SCREEN_WIDTH
CourseTimeOffCommand=bouncebegin,0.5;addx,-SCREEN_WIDTH

CourseContentsListX=BannerFramePosX()-5
CourseContentsListY=SCREEN_CENTER_Y+6
CourseContentsListOnCommand=draworder,1;halign,0;valign,0;cropbottom,0.55;addx,-500;sleep,0.264;decelerate,0.52;addx,500;sleep,0.1;linear,0
CourseContentsListOffCommand=sleep,0.033;accelerate,0.33;addx,-500
CourseContentsListShowCommand=bouncebegin,0.3;zoomy,1
CourseContentsListHideCommand=linear,0.3;zoomy,0

[ScreenGameplay]
CodeNames="SpeedUp,SpeedDown"
CodeSpeedUp="@Select-Up"
CodeSpeedDown="@Select-Down"

StartGivesUp=true
ShowScoreInRave=false
AllowCenter1Player=true

# what the hell is the point of this metric anyways
StopCourseEarly=false

# this value should match 3.9's ScreenGameplay.cpp:
MinSecondsToStepNextSong=5

# in 3.9 this is:
# (gameplay in length) + (gameplay ready length) + (gameplay go length) + 2
MinSecondsToStep=5.496
# in 3.9 this is the start of gameplay ready.
MinSecondsToMusic=1.55

# used exclusively in ScreenGameplay::GetMusicEndTiming
OutTransitionLength=5
# how long the course "next song" transition takes.
CourseTransitionLength=20

# unsure.
MusicFadeOutSeconds=0.5
BeginFailedDelay=1.0

ShowCreditDisplay=true

PlayerP1OnCommand=
PlayerP1OffCommand=
PlayerP2OnCommand=
PlayerP2OffCommand=

PlayerP1OnePlayerOneSideX=ScreenGameplay_P1X()
PlayerP2OnePlayerOneSideX=ScreenGameplay_P2X()
PlayerP1TwoPlayersTwoSidesX=ScreenGameplay_P1X()
PlayerP2TwoPlayersTwoSidesX=ScreenGameplay_P2X()
PlayerP1TwoPlayersOneSideX=ScreenGameplay_P1X()
PlayerP2TwoPlayersOneSideX=ScreenGameplay_P2X()

PlayerP1OnePlayerTwoSidesX=SCREEN_CENTER_X
PlayerP2OnePlayerTwoSidesX=SCREEN_CENTER_X
PlayerP1TwoPlayersSharedSidesX=SCREEN_CENTER_X
PlayerP2TwoPlayersSharedSidesX=SCREEN_CENTER_X

ShowStageFrame=true
StageFrameX=SCREEN_CENTER_X+1
StageFrameY=SCREEN_TOP+28
StageFrameOnCommand=draworder,1
StageFrameOffCommand=

ShowLifeMeterForDisabledPlayers=false
LifeFrameX=SCREEN_CENTER_X
LifeFrameY=SCREEN_TOP+24
LifeFrameOnCommand=draworder,98;
LifeFrameOffCommand=
#--#
LifeP1X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")+5
LifeP1Y=SCREEN_TOP+24
LifeP1OnCommand=draworder,2
LifeP1OffCommand=
LifeP2X=THEME:GetMetric(Var "LoadingScreen","PlayerP2OnePlayerOneSideX")-5
LifeP2Y=SCREEN_TOP+24
LifeP2OnCommand=draworder,2;zoomx,-1
LifeP2OffCommand=

CombinedLifeX=SCREEN_CENTER_X
CombinedLifeY=SCREEN_TOP+24
CombinedLifeOnCommand=draworder,1
CombinedLifeOffCommand=

ToastyDisplayP1X=
ToastyDisplayP1Y=
ToastyDisplayP1OnCommand=
ToastyDisplayP1OffCommand=
#
ToastyDisplayP2X=
ToastyDisplayP2Y=
ToastyDisplayP2OnCommand=
ToastyDisplayP2OffCommand=


ShowStageDisplay=true
StageDisplayX=SCREEN_CENTER_X+2
StageDisplayY=SCREEN_TOP+32
StageDisplayOnCommand=draworder,4
StageDisplayOffCommand=
StageDisplayUseShortString=true

PlayerOptionsP1X=SCREEN_CENTER_X-80
PlayerOptionsP1Y=SCREEN_BOTTOM-34
PlayerOptionsP1OnCommand=visible,false
PlayerOptionsP1OffCommand=
PlayerOptionsP2X=SCREEN_CENTER_X-80
PlayerOptionsP2Y=SCREEN_BOTTOM-34
PlayerOptionsP2OnCommand=visible,false
PlayerOptionsP2OffCommand=
StopWords="1X,default,Overhead,Off"

ShowScoreFrame=true
ScoreFrameX=
ScoreFrameY=SCREEN_BOTTOM-36
ScoreFrameOnCommand=draworder,2
ScoreFrameOffCommand=
#--#
ScoreP1X=WideScale(SCREEN_LEFT+95,SCREEN_LEFT+134)
ScoreP1Y=SCREEN_BOTTOM-34
ScoreP1OnCommand=draworder,2;diffuse,color("#F9FF20");zoomy,1.2;zoomx,WideScale(1.2,1.6)
ScoreP1OffCommand=
ScoreP2X=WideScale(SCREEN_RIGHT-95,SCREEN_RIGHT-134)
ScoreP2Y=SCREEN_BOTTOM-34
ScoreP2OnCommand=draworder,2;diffuse,color("#F9FF20");zoomy,1.2;zoomx,WideScale(1.2,1.6)
ScoreP2OffCommand=
#--#

StepsDisplayP1X=SCREEN_LEFT+75
StepsDisplayP1Y=0
StepsDisplayP1OnCommand=draworder,2;horizalign,left;visible,false
StepsDisplayP1OffCommand=
StepsDisplayP1SetNoReverseCommand=y,SCREEN_BOTTOM-20;cropbottom,0.5
StepsDisplayP1SetReverseCommand=y,SCREEN_TOP+15;croptop,0.5

StepsDisplayP2X=SCREEN_RIGHT-75
StepsDisplayP2Y=0
StepsDisplayP2OnCommand=draworder,2;horizalign,left;visible,false
StepsDisplayP2OffCommand=
StepsDisplayP2SetNoReverseCommand=y,SCREEN_BOTTOM-20;cropbottom,0.5
StepsDisplayP2SetReverseCommand=y,SCREEN_TOP+20;croptop,0.5

LyricDisplaySetNoReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y+160
LyricDisplaySetReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y-160
LyricDisplaySetOneReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y-120
LyricDisplayDefaultColor=color("0,1,0,1");

ActiveAttackListP1X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")
ActiveAttackListP1Y=
ActiveAttackListP1OnCommand=visible,false
ActiveAttackListP1OffCommand=
ActiveAttackListP2X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")
ActiveAttackListP2Y=
ActiveAttackListP2OnCommand=visible,false
ActiveAttackListP2OffCommand=

SecondaryScoreP1X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")
SecondaryScoreP1Y=SCREEN_CENTER_Y
SecondaryScoreP1OnCommand=draworder,99;zoom,1;diffuse,color("#F9FF20");
SecondaryScoreP1OffCommand=
SecondaryScoreP2X=THEME:GetMetric(Var "LoadingScreen","PlayerP2OnePlayerOneSideX")
SecondaryScoreP2Y=SCREEN_CENTER_Y
SecondaryScoreP2OnCommand=draworder,99;zoom,1;diffuse,color("#F9FF20");
SecondaryScoreP2OffCommand=

[ScreenGameplayEndless]
Fallback="ScreenGameplay"
PrevScreen="ScreenTitleMenu"
NextScreen="ScreenEndlessManager"

[ScoreDisplayRave]
MeterP1OnCommand=draworder,-1;y,-157;x,WideScale(150,215);diffuseshift;effectcolor1,1,1,1,1;effectcolor2,0.6,0.6,0.6,1;effectperiod,0.5;rotationz,90;rotationx,-180
MeterP2OnCommand=draworder,-1;y,-157;x,WideScale(-150,-215);diffuseshift;effectcolor1,1,1,1,1;effectcolor2,0.6,0.6,0.6,1;effectperiod,0.5;rotationz,-90
LevelP1OnCommand=draworder,99;diffuseshift;effectcolor1,1,1,1,1;effectcolor2,0.7,0.7,0.7,1;effectperiod,0.333;addy,205.5;addx,-80
LevelP2OnCommand=draworder,99;diffuseshift;effectcolor1,1,1,1,1;effectcolor2,0.7,0.7,0.7,1;effectperiod,0.333;addy,205.5;addx,120


[StepsDisplay]
#i hate stepsdisplay -FlameyBoy
ShowDescription=false

[Player]
#i want to use this for a mission -tertu
RollBodyIncrementsCombo=true

PercentUntilColorCombo=0
ComboUnderField=true

#these are in Other.lua
JudgmentTransformCommand=%JudgmentTransformCommand

ComboTransformCommand=%ComboTransformCommand

ReceptorArrowsYStandard=-156
ReceptorArrowsYReverse=128

ComboUnderField=true
AttackDisplayY=-70
AttackDisplayYReverse=70

HoldJudgmentYStandard=IsGame("pump") and -99999 or -110
HoldJudgmentYReverse=IsGame("pump") and -99999 or 110

[Judgment]
JudgmentOnCommand=shadowlength,0;

JudgmentW1Command=finishtweening;stopeffect;diffusealpha,1;zoom,1.3;linear,0.05;zoom,1;sleep,0.8;linear,0;diffusealpha,0
JudgmentW2Command=finishtweening;stopeffect;diffusealpha,1;zoom,1.3;linear,0.05;zoom,1;sleep,0.8;linear,0;diffusealpha,0
JudgmentW3Command=finishtweening;stopeffect;diffusealpha,1;zoom,1.2;linear,0.05;zoom,1;sleep,0.8;linear,0;diffusealpha,0
JudgmentW4Command=finishtweening;stopeffect;diffusealpha,1;zoom,1.1;linear,0.05;zoom,1;sleep,0.8;linear,0;diffusealpha,0
JudgmentW5Command=finishtweening;stopeffect;diffusealpha,1;zoom,1.0;wag;effectmagnitude,8,0,0;effectperiod,0.5;sleep,0.8;linear,0;diffusealpha,0
JudgmentMissCommand=finishtweening;stopeffect;diffusealpha,1;zoom,1;addy,-20;linear,0.8;addy,20;sleep,0.8;linear,0;diffusealpha,0

JudgmentBiasOnCommand=shadowlength,0;x,75;y,48;zoom,0.9
JudgmentBiasCommand=diffusealpha,1;sleep,0.85;diffusealpha,0

[HoldJudgment]
HoldJudgmentLetGoCommand=finishtweening;visible,true;shadowlength,0;diffusealpha,1;zoom,1;sleep,0.6;diffusealpha,0
HoldJudgmentHeldCommand=finishtweening;visible,true;shadowlength,0;diffusealpha,1;zoomy,1.5;zoomx,1.2;sleep,0.016;linear,0.033;zoom,1;sleep,0.55;linear,0;diffusealpha,0

# todo: fix this
[Combo]
ShowComboAt=4
#ShowMissesAt is no longer a metric it would seem

NumberOnCommand=align,0.75,1;shadowlength,4
LabelOnCommand=align,0.25,1;addy,8;shadowlength,4

PulseCommand=%function(self,param) self:stoptweening(); self:x(param.NumberX) self:zoom(1.33*param.Zoom); self:linear(0.05); self:zoom(param.Zoom); end
PulseLabelCommand=%function(self,param) self:stoptweening(); self:x(param.LabelX); self:zoom(1.33*param.LabelZoom); self:linear(0.05); self:zoom(param.LabelZoom); end

NumberMinZoom=0.8
NumberMaxZoom=1*1
NumberMaxZoomAt=100

NumberMinX=-30
NumberMaxX=-25

LabelMinX=10
LabelMaxX=40

LabelMinZoom=0.8
LabelMaxZoom=1

[RollingNumbers]
TextFormat="%07.0f"
ApproachSeconds=0.1
Commify=true
LeadingZeroMultiplyColor=color("#777777FF")

[RollingNumbersMusic]
Fallback="RollingNumbers"
TextFormat="%7.0f"
Commify=false

[RollingNumbersMeterNoDiff]
Fallback="RollingNumbers"
ApproachSeconds=0.00001
LeadingZeroMultiplyColor=color("1,1,1,1")
TextFormat="%2.0f"

[RollingNumbersMeter]
Fallback="RollingNumbers"
ApproachSeconds=0.00001
LeadingZeroMultiplyColor=color("0.25,0.25,0.25,1")
TextFormat="%2.0f"

[StreamDisplay]
PillTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:setsize((SCREEN_WIDTH/2.53),13):skewx(-0.9) end

TextureCoordScaleX=-1
NumPills=1

[StepsDisplayGameplay]
Fallback="StepsDisplay"
ShowTicks=false
ShowAutogen=false
ShowStepsType=false
ShowMeter=false

ShowFrame=true
FrameX=0
FrameY=0
FrameOnCommand=animate,false
FrameLoadCommand=%function(self,param) \
	if param.PlayerState then \
		local pn = param.PlayerState:GetPlayerNumber(); \
		self:setstate(LoadStepsDisplayGameplayFrame(self,pn)) \
	end; \
end;
# thanks default theme, I need to *not* color this.
FrameSetCommand=visible,true

[CombinedLifeMeterTug]
MeterWidth=610
MeterHeight=32

[LifeMeterBattery Percent]
#this shouldn't show up. make it not show up. -tertu
PercentP1OnCommand=visible,false
PercentP2OnCommand=visible,false
DancePointsP1OnCommand=visible,false
DancePointsP2OnCommand=visible,false

[LifeMeterBattery]
MinScoreToKeepLife='TapNoteScore_W3'
MaxLives=4
DangerThreshold=1

BatteryP1X=0
BatteryP1Y=0
BatteryP2X=0
BatteryP2Y=0

NumLivesFormat=
NumLivesP1X=0
NumLivesP1Y=0
NumLivesP1GainLifeCommand=visible,false
NumLivesP1LoseLifeCommand=visible,false
NumLivesP2X=92
NumLivesP2Y=0
NumLivesP2GainLifeCommand=visible,false
NumLivesP2LoseLifeCommand=visible,false

[ScreenGameplayExtra]
Fallback="ScreenGameplay"

StageFrameX=SCREEN_CENTER_X
StageFrameY=SCREEN_BOTTOM-28
StageFrameOnCommand=draworder,1
StageFrameOffCommand=

ScoreFrameX=
ScoreFrameY=SCREEN_TOP+26
ScoreFrameOnCommand=draworder,2;zoomy,-1
ScoreFrameOffCommand=sleep,0.792;addy,999
#--#
ScoreP1X=SCREEN_LEFT+95
ScoreP1Y=SCREEN_TOP+24
ScoreP1OnCommand=draworder,2;zoom,1.2;diffuse,color("#F9FF20");
ScoreP1OffCommand=sleep,0.792;addy,999
ScoreP2X=SCREEN_RIGHT-95
ScoreP2Y=SCREEN_TOP+24
ScoreP2OnCommand=draworder,2;zoom,1.2;diffuse,color("#F9FF20");
ScoreP2OffCommand=sleep,0.792;addy,999

# difficulty icon
StepsDisplayP1SetReverseCommand=y,SCREEN_TOP+11;halign,0;x,SCREEN_LEFT+75
StepsDisplayP2SetReverseCommand=y,SCREEN_TOP+11;halign,1;x,SCREEN_RIGHT-75

# life section on bottom
LifeFrameX=SCREEN_CENTER_X
LifeFrameY=SCREEN_BOTTOM-26
LifeFrameOnCommand=draworder,98;zoomy,-1
LifeFrameOffCommand=sleep,0.792;addy,999
#--#
LifeP1X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")+3
LifeP1Y=SCREEN_BOTTOM-25
LifeP1OnCommand=draworder,2;zoomy,-1
LifeP1OffCommand=sleep,0.792;addy,999
LifeP2X=THEME:GetMetric(Var "LoadingScreen","PlayerP2OnePlayerOneSideX")-3
LifeP2Y=SCREEN_BOTTOM-25
LifeP2OnCommand=draworder,2;zoomx,-1;zoomy,-1
LifeP2OffCommand=sleep,0.792;addy,999

StageDisplayX=SCREEN_CENTER_X+2
StageDisplayY=SCREEN_BOTTOM-32
StageDisplayOnCommand=draworder,4
StageDisplayOffCommand=
StageDisplayUseShortString=true

################################################################################
[ScreenEvaluation]
ShowFooter=true
ShowStyleIcon=true
WaitForChildrenBeforeTweeningOut=true
TimerSeconds=15

PrepareScreens="ScreenProfileSave"
PersistScreens="ScreenEvaluation,ScreenProfileSave,ScreenSelectMusic"

NextScreen=Branch.AfterEvaluation()
PrevScreen=Branch.AfterEvaluation()

ShowHeader=true
HeaderX=
HeaderY=SCREEN_TOP+38
HeaderOnCommand=addy,-104;sleep,0.396;linear,0.198;addy,104

StyleIconOffCommand=sleep,0.1;linear,0.1;zoomy,0
StyleIconOnCommand=draworder,96;zoomy,0;sleep,0.2;sleep,0.1;linear,0.1;zoomy,1
StyleIconX=SCREEN_CENTER_X-120
StyleIconY=SCREEN_TOP+15

ShowStepsDisplayP1=GAMESTATE:IsHumanPlayer(PLAYER_1)
StepsDisplayP1X=SCREEN_CENTER_X-320+25
StepsDisplayP1Y=SCREEN_CENTER_Y-12
StepsDisplayP1OnCommand=zoom,3.5;visible,GAMESTATE:IsHumanPlayer(PLAYER_1);
StepsDisplayP1OffCommand=linear,0.0015;zoomx,0;
#
ShowStepsDisplayP2=GAMESTATE:IsHumanPlayer(PLAYER_2)
StepsDisplayP2X=SCREEN_CENTER_X+320+30
StepsDisplayP2Y=SCREEN_CENTER_Y-12
StepsDisplayP2OnCommand=zoom,3.5;visible,GAMESTATE:IsHumanPlayer(PLAYER_2);
StepsDisplayP2OffCommand=linear,0.0015;zoomx,0;

ShowBannerArea=true
BannerWidth=256
BannerHeight=80
LargeBannerX=SCREEN_CENTER_X
LargeBannerY=SCREEN_CENTER_Y-135
LargeBannerOnCommand=draworder,60;zoomy,0;sleep,0.2;sleep,0.1;linear,0.1;zoomy,1
LargeBannerOffCommand=sleep,0.1;linear,0.1;zoomy,0
LargeBannerFrameX=SCREEN_CENTER_X
LargeBannerFrameY=SCREEN_CENTER_Y-129
LargeBannerFrameOnCommand=draworder,61;zoomy,0;sleep,0.2;sleep,0.1;linear,0.1;zoomy,1
LargeBannerFrameOffCommand=sleep,0.1;linear,0.1;zoomy,0

ShowStageDisplay=not GAMESTATE:IsCourseMode()
StageDisplayX=SCREEN_CENTER_X
StageDisplayY=SCREEN_CENTER_Y-88
StageDisplayOnCommand=draworder,62;zoomy,0;addy,-39;sleep,0.2;sleep,0.1;linear,0.1;zoomy,1;addy,39
StageDisplayOffCommand=sleep,0.1;linear,0.1;zoomy,0;addy,-39

ShowDifficultyIcon=not GAMESTATE:IsCourseMode()
DifficultyIconP1X=SCREEN_LEFT+65
DifficultyIconP1Y=SCREEN_BOTTOM-103
DifficultyIconP1OnCommand=draworder,9;addx,-250;sleep,0.2;linear,0.2;addx,250
DifficultyIconP1OffCommand=linear,0.2;addx,-250
DifficultyIconP2X=SCREEN_RIGHT-65
DifficultyIconP2Y=SCREEN_BOTTOM-103
DifficultyIconP2OnCommand=draworder,9;addx,250;sleep,0.2;linear,0.2;addx,-250
DifficultyIconP2OffCommand=linear,0.2;addx,250

PlayerOptionsP1X=
PlayerOptionsP1Y=
PlayerOptionsP1OnCommand=visible,false
PlayerOptionsP1OffCommand=
PlayerOptionsP2X=
PlayerOptionsP2Y=
PlayerOptionsP2OnCommand=visible,false
PlayerOptionsP2OffCommand=

#note: the custom grade actors use the grade metrics too
ShowGradeArea=false
GradeFrameP1X=
GradeFrameP1Y=
GradeFrameP1OnCommand=
GradeFrameP1OffCommand=
GradeFrameP2X=
GradeFrameP2Y=
GradeFrameP2OnCommand=
GradeFrameP2OffCommand=
GradeP1X=SCREEN_CENTER_X-233
GradeP1Y=SCREEN_CENTER_Y-121
GradeP1OnCommand=zoom,0;sleep,0.5;zoom,1
GradeP1OffCommand=linear,0.1;zoom,0
GradeP2X=SCREEN_CENTER_X+230
GradeP2Y=SCREEN_CENTER_Y-121
GradeP2OnCommand=zoom,0;sleep,0.5;zoom,1
GradeP2OffCommand=linear,0.1;zoom,0

RingP1X=SCREEN_CENTER_X-180
RingP1Y=SCREEN_CENTER_Y-130
RingP2X=SCREEN_CENTER_X+315
RingP2Y=SCREEN_CENTER_Y-130

ShowSharedJudgmentLineLabels=true

ShowJudgmentLineW1=true
W1LabelX=SCREEN_CENTER_X
W1LabelY=SCREEN_CENTER_Y-44
W1LabelOnCommand=visible,false
W1LabelOffCommand=
#--#
W1NumberP1X=SCREEN_CENTER_X-123
W1NumberP1Y=SCREEN_CENTER_Y-44
W1NumberP1OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W1NumberP1OffCommand=zoomy,0
W1NumberP2X=SCREEN_CENTER_X+124
W1NumberP2Y=SCREEN_CENTER_Y-44
W1NumberP2OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W1NumberP2OffCommand=zoom,0

ShowJudgmentLineW2=true
W2LabelX=SCREEN_CENTER_X
W2LabelY=SCREEN_CENTER_Y-22
W2LabelOnCommand=visible,false
W2LabelOffCommand=
#--#
W2NumberP1X=SCREEN_CENTER_X-123
W2NumberP1Y=SCREEN_CENTER_Y-22
W2NumberP1OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W2NumberP1OffCommand=zoomy,0
W2NumberP2X=SCREEN_CENTER_X+124
W2NumberP2Y=SCREEN_CENTER_Y-2
W2NumberP2OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W2NumberP2OffCommand=zoomy,0

ShowJudgmentLineW3=true
W3LabelX=SCREEN_CENTER_X
W3LabelY=SCREEN_CENTER_Y
W3LabelOnCommand=visible,false
W3LabelOffCommand=
#--#
W3NumberP1X=SCREEN_CENTER_X-123
W3NumberP1Y=SCREEN_CENTER_Y
W3NumberP1OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W3NumberP1OffCommand=zoomy,0
W3NumberP2X=SCREEN_CENTER_X+124
W3NumberP2Y=SCREEN_CENTER_Y
W3NumberP2OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W3NumberP2OffCommand=zoomy,0

ShowJudgmentLineW4=true
W4LabelX=SCREEN_CENTER_X
W4LabelY=SCREEN_CENTER_Y+22
W4LabelOnCommand=visible,false
W4LabelOffCommand=
#--#
W4NumberP1X=SCREEN_CENTER_X-123
W4NumberP1Y=SCREEN_CENTER_Y+22
W4NumberP1OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W4NumberP1OffCommand=zoomy,0
W4NumberP2X=SCREEN_CENTER_X+124
W4NumberP2Y=SCREEN_CENTER_Y+22
W4NumberP2OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W4NumberP2OffCommand=zoomy,0

ShowJudgmentLineW5=true
W5LabelX=SCREEN_CENTER_X
W5LabelY=SCREEN_CENTER_Y+43
W5LabelOnCommand=visible,false
W5LabelOffCommand=
#--#
W5NumberP1X=SCREEN_CENTER_X-123
W5NumberP1Y=SCREEN_CENTER_Y+43
W5NumberP1OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W5NumberP1OffCommand=zoomy,0
W5NumberP2X=SCREEN_CENTER_X+124
W5NumberP2Y=SCREEN_CENTER_Y+43
W5NumberP2OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
W5NumberP2OffCommand=zoomy,0

ShowJudgmentLineMiss=true
MissLabelX=SCREEN_CENTER_X
MissLabelY=SCREEN_CENTER_Y+65
MissLabelOnCommand=visible,false
MissLabelOffCommand=
#--#
MissNumberP1X=SCREEN_CENTER_X-123
MissNumberP1Y=SCREEN_CENTER_Y+65
MissNumberNumberP1OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
MissNumberP1OffCommand=zoomy,0
MissNumberP2X=SCREEN_CENTER_X+124
MissNumberP2Y=SCREEN_CENTER_Y+65
MissNumberP2OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
MissNumberP2OffCommand=zoomy,0

ShowJudgmentLineHeld=true
HeldLabelX=SCREEN_CENTER_X
HeldLabelY=SCREEN_CENTER_Y+87
HeldLabelOnCommand=visible,false
HeldLabelOffCommand=
#--#
HeldNumberP1X=SCREEN_CENTER_X-123
HeldNumberP1Y=SCREEN_CENTER_Y+87
HeldNumberP1OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
HeldNumberP1OffCommand=zoomy,0
HeldNumberP2X=SCREEN_CENTER_X+124
HeldNumberP2Y=SCREEN_CENTER_Y+87
HeldNumberP2OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
HeldNumberP2OffCommand=zoomy,0

ShowJudgmentLineMaxCombo=true
MaxComboMaxDigits=4
MaxComboLabelX=SCREEN_CENTER_X
MaxComboLabelY=SCREEN_CENTER_Y+109
MaxComboLabelOnCommand=visible,false
MaxComboLabelOffCommand=
#--#
MaxComboNumberP1X=SCREEN_CENTER_X-123
MaxComboNumberP1Y=SCREEN_CENTER_Y+109
MaxComboNumberP1OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
MaxComboNumberP1OffCommand=zoom,0
MaxComboNumberP2X=SCREEN_CENTER_X+124
MaxComboNumberP2Y=SCREEN_CENTER_Y+109
MaxComboNumberP2OnCommand=diffuse,color("#FFFFFF");zoom,0;sleep,0.2;zoom,1
MaxComboNumberP2OffCommand=zoom,0

ShowScoreArea=true
ScoreLabelX=SCREEN_CENTER_X
ScoreLabelY=SCREEN_CENTER_Y-204
ScoreLabelOnCommand=blend,Blend.Add;;diffuse,color("#FFFFFF");spin;effectmagnitude,0,0,-200;draworder,97;shadowlength,0;addy,-104;sleep,0.2;decelerate,0.2;addy,104
ScoreLabelOffCommand=stopeffect;decelerate,0.2;addy,-104
#--#
ScoreNumberP1X=WideScale(SCREEN_LEFT+95,SCREEN_LEFT+134)
ScoreNumberP1Y=SCREEN_CENTER_Y+155
ScoreNumberP1OnCommand=draworder,2;diffuse,color("#F9FF20");zoomy,1.2;zoomx,WideScale(1.2,1.6);draworder,9;addx,-246;sleep,0.2;linear,0.2;addx,246
ScoreNumberP1OffCommand=linear,0.2;addx,-246
ScoreNumberP2X=WideScale(SCREEN_RIGHT-95,SCREEN_RIGHT-134)
ScoreNumberP2Y=SCREEN_CENTER_Y+155
ScoreNumberP2OnCommand=draworder,2;diffuse,color("#F9FF20");zoomy,1.2;zoomx,WideScale(1.2,1.6)draworder,9;addx,246;sleep,0.2;linear,0.2;addx,-246
ScoreNumberP2OffCommand=linear,0.2;addx,246

ShowBonusArea=false

ShowMachineRecord=true
MachineRecordP1X=SCREEN_CENTER_X-230
MachineRecordP1Y=SCREEN_CENTER_Y+120
MachineRecordP1OnCommand=zoom,0.88;draworder,99;diffusealpha,0;linear,0.7;diffusealpha,1;diffuseshift;effectcolor1,color("1,1,1,1");effectcolor2,color("0.4,0.4,0.4,1");effectperiod,0.198
MachineRecordP1OffCommand=linear,0.7;diffusealpha,0

MachineRecordP2X=SCREEN_CENTER_X+230
MachineRecordP2Y=SCREEN_CENTER_Y+120
MachineRecordP2OnCommand=zoom,0.88;draworder,99;diffusealpha,0;linear,0.7;diffusealpha,1;diffuseshift;effectcolor1,color("1,1,1,1");effectcolor2,color("0.4,0.4,0.4,1");effectperiod,0.198
MachineRecordP2OffCommand=linear,0.7;diffusealpha,0

ShowPersonalRecord=true
PersonalRecordP1X=SCREEN_CENTER_X-230
PersonalRecordP1Y=SCREEN_CENTER_Y+100
PersonalRecordP1OnCommand=zoom,0.88;draworder,99;diffusealpha,0;linear,0.7;diffusealpha,1;diffuseshift;effectcolor1,color("1,1,1,1");effectcolor2,color("0.4,0.4,0.4,1");effectperiod,0.198
PersonalRecordP1OffCommand=linear,0.7;diffusealpha,0

PersonalRecordP2X=SCREEN_CENTER_X+230
PersonalRecordP2Y=SCREEN_CENTER_Y+100
PersonalRecordP2OnCommand=zoom,0.88;draworder,99;diffusealpha,0;linear,0.7;diffusealpha,1;diffuseshift;effectcolor1,color("1,1,1,1");effectcolor2,color("0.4,0.4,0.4,1");effectperiod,0.198
PersonalRecordP2OffCommand=linear,0.7;diffusealpha,0
----------------------------------------
# only used in normal mode
ShowTryExtraStage=false
TryExtraStageX=SCREEN_CENTER_X
TryExtraStageY=SCREEN_CENTER_Y+165
TryExtraStageOnCommand=addx,482;sleep,1.023;decelerate,0.520;addx,-482;glowshift;effectperiod,0.4;effectcolor1,0,0,0,0;effectcolor2,0,0,0,0.3
TryExtraStageOffCommand=sleep,0.750;diffusealpha,0

# used in two of three course mode evals (and extra stage)
ShowTimeArea=false
TimeLabelX=SCREEN_CENTER_X
TimeLabelY=SCREEN_CENTER_Y+115
TimeLabelOnCommand=addy,138;sleep,0.866;decelerate,0.116;addy,-138
TimeLabelOffCommand=sleep,0.016;accelerate,0.116;addy,138
#--#
TimeNumberP1X=SCREEN_LEFT+120
TimeNumberP1Y=SCREEN_CENTER_Y
TimeNumberP1OnCommand=diffusealpha,0;sleep,0.8;diffusealpha,1
TimeNumberP1OffCommand=sleep,0.0;accelerate,0.3;addx,-SCREEN_CENTER_X
TimeNumberP2X=SCREEN_CENTER_X+160
TimeNumberP2Y=SCREEN_CENTER_Y+140
TimeNumberP2OnCommand=addx,SCREEN_CENTER_X;sleep,0.8;decelerate,0.3;addx,-SCREEN_CENTER_X
TimeNumberP2OffCommand=sleep,0.0;accelerate,0.3;addx,SCREEN_CENTER_X

ShowPointsArea=false
PercentFrameP1X=SCREEN_CENTER_X-224
PercentFrameP1Y=SCREEN_CENTER_Y-130
PercentFrameP1OnCommand=addx,-SCREEN_CENTER_X;sleep,0.0;decelerate,0.3;addx,SCREEN_CENTER_X
PercentFrameP1OffCommand=sleep,0.8;accelerate,0.3;addx,-SCREEN_CENTER_X
PercentFrameP2X=SCREEN_CENTER_X+224
PercentFrameP2Y=SCREEN_CENTER_Y-130
PercentFrameP2OnCommand=addx,SCREEN_CENTER_X;sleep,0.0;decelerate,0.3;addx,-SCREEN_CENTER_X
PercentFrameP2OffCommand=sleep,0.8;accelerate,0.3;addx,SCREEN_CENTER_X

PercentP1X=SCREEN_CENTER_X-208
PercentP1Y=SCREEN_CENTER_Y-105
PercentP1OnCommand=diffusealpha,0;sleep,0.8;diffusealpha,1;
PercentP1OffCommand=sleep,0.8;accelerate,0.3;addx,-SCREEN_CENTER_X
PercentP2X=SCREEN_CENTER_X+240
PercentP2Y=SCREEN_CENTER_Y-105
PercentP2OnCommand=diffusealpha,0;sleep,0.8;diffusealpha,1;
PercentP2OffCommand=sleep,0.8;accelerate,0.3;addx,SCREEN_CENTER_X

## used in all three course mode evals; putting metrics here
ShowSurvivedArea=false
SurvivedFrameP1X=SCREEN_CENTER_X-200
SurvivedFrameP1Y=SCREEN_CENTER_Y+16
SurvivedFrameP1OnCommand=diffusealpha,0;linear,0.7;diffusealpha,1
SurvivedFrameP1OffCommand=linear,0.7;diffusealpha,0
SurvivedFrameP2X=SCREEN_CENTER_X+200
SurvivedFrameP2Y=SCREEN_CENTER_Y+16
SurvivedFrameP2OnCommand=diffusealpha,0;linear,0.7;diffusealpha,1
SurvivedFrameP2OffCommand=linear,0.7;diffusealpha,0

SurvivedNumberP1X=SCREEN_CENTER_X-224
SurvivedNumberP1Y=SCREEN_CENTER_Y-20
SurvivedNumberP1OnCommand=diffusealpha,0;sleep,0.8;diffusealpha,1;
SurvivedNumberP1OffCommand=linear,0.7;diffusealpha,0
SurvivedNumberP2X=SCREEN_CENTER_X+220
SurvivedNumberP2Y=SCREEN_CENTER_Y-20
SurvivedNumberP2OnCommand=diffusealpha,0;sleep,0.8;diffusealpha,1;
SurvivedNumberP2OffCommand=linear,0.7;diffusealpha,0

# Song options
SongOptionsX=SCREEN_CENTER_X
SongOptionsY=SCREEN_CENTER_Y-188
SongOptionsOnCommand=draworder,99;shadowlength,1;zoomy,0;linear,0.5;zoom,0.5
SongOptionsOffCommand=linear,0.5;zoomy,0

ShowSongInformation=true
SongInformationX=SCREEN_CENTER_X
SongInformationY=SCREEN_BOTTOM-80
SongInformationOnCommand=playcommand,"Set";draworder,105
SongInformationOffCommand=sleep,0.0000;sleep,0.333;decelerate,0.066;zoomx,0;diffusealpha,0

ShowWinArea=GAMESTATE:GetPlayMode() == 'PlayMode_Rave'
WinFrameP1X=
WinFrameP1Y=
WinFrameP1OnCommand=
WinFrameP2X=
WinFrameP2Y=
WinFrameP2OnCommand=
#----#
WinP1X=SCREEN_LEFT+123
WinP1Y=SCREEN_CENTER_Y+70
WinP1OnCommand=draworder,101;diffusealpha,0;sleep,0.5;zoomy,0;zoomx,4;linear,0.198;diffusealpha,1;zoomy,1;zoomx,1
WinP1OffCommand=linear,0.132;zoomy,0;zoomx,4;diffusealpha,0
WinP2X=SCREEN_RIGHT-123
WinP2Y=SCREEN_CENTER_Y+70
WinP2OnCommand=draworder,101;diffusealpha,0;sleep,0.5;zoomy,0;zoomx,4;linear,0.198;diffusealpha,1;zoomy,1;zoomx,1
WinP2OffCommand=linear,0.132;zoomy,0;zoomx,4;diffusealpha,0

#=======================#
[ScreenEvaluationNormal]
ShowRecordDisplays=true

ShowMachineRecord=true

ShowPersonalRecord=true

[ScreenEvaluationOni]
Fallback="ScreenEvaluation"
ShowTimeArea=true

[ScreenEvaluationNonstop]
Fallback="ScreenEvaluationOni"

[ScreenEvaluationRave]
Fallback="ScreenEvaluation"

[ScreenEvaluationSummary]
Fallback="ScreenEvaluation"
NextScreen=Branch.AfterSummary

PlayMusic=false

Summary=true
ShowStyleIcon=true
ShowStageDisplay=false
ShowDifficultyIcon=false
ShowTryExtraStage=false

ShowScoreArea=true
#--#
ScoreNumberP1X=SCREEN_LEFT+100
ScoreNumberP1Y=SCREEN_CENTER_Y+155
ScoreNumberP1OnCommand=draworder,88;diffuse,color("#F9FF20");draworder,9;addx,-246;sleep,0.2;linear,0.2;addx,246
ScoreNumberP1OffCommand=linear,0.2;addx,-246
ScoreNumberP2X=SCREEN_RIGHT-100
ScoreNumberP2Y=SCREEN_CENTER_Y+155
ScoreNumberP2OnCommand=draworder,88;diffuse,color("#F9FF20");draworder,9;addx,246;sleep,0.2;linear,0.2;addx,-246
ScoreNumberP2OffCommand=linear,0.2;addx,246

#--Banner--#

SmallBanner1X=SCREEN_CENTER_X-60
SmallBanner1Y=SCREEN_CENTER_Y-155
SmallBanner1OnCommand=visible,true;draworder,100;zoom,0.5;
SmallBanner1OffCommand=visible,false
#--#
SmallBanner2X=SCREEN_CENTER_X-30
SmallBanner2Y=SCREEN_CENTER_Y-145
SmallBanner2OnCommand=visible,true;draworder,80;zoom,0.5;
SmallBanner2OffCommand=visible,false
#--#
SmallBanner3X=SCREEN_CENTER_X
SmallBanner3Y=SCREEN_CENTER_Y-135
SmallBanner3OnCommand=visible,true;draworder,60;zoom,0.5;
SmallBanner3OffCommand=visible,false
#--#
SmallBanner4X=SCREEN_CENTER_X+30
SmallBanner4Y=SCREEN_CENTER_Y-125
SmallBanner4OnCommand=visible,true;draworder,40;zoom,0.5;
SmallBanner4OffCommand=visible,false
#--#
SmallBanner5X=SCREEN_CENTER_X+60
SmallBanner5Y=SCREEN_CENTER_Y-115
SmallBanner5OnCommand=visible,true;draworder,20;zoom,0.5;
SmallBanner5OffCommand=visible,false
#--#

[ScreenCredits]
ResetGameState=false
NextScreen="ScreenGameOver"
StopMusicOnBack=true

[ScreenProfileLoad]
Fallback="ScreenSelectProfile"
NextScreen=Branch.AfterProfileLoad()
ShowHeader=false
ShowFooter=false
PlayMusic=false

CodeNames="Start"
CodeStart="Start"

[ScreenSelectProfile]
WaitForChildrenBeforeTweening=false
Fallback="ScreenWithMenuElements"
Class="ScreenSelectProfile"
#
NextScreen="ScreenCaution"
PrevScreen=Branch.TitleMenu()
StartScreen="ScreenTitleMenu"
ScreenOnCommand=%function(self) self:lockinput(3); end;
#
ShowHeader=true
HeaderX=
HeaderY=SCREEN_TOP+38
HeaderOnCommand=addy,-104;sleep,0.396;linear,0.198;addy,104
ShowFooter=true
#
CodeNames=SelectProfileKeys()
CodeUp="+Left"
CodeUp2="+MenuLeft"
CodeDown="+Right"
CodeDown2="+MenuRight"
# Holding Start let us skip ( annoying )
CodeStart="Start"
CodeBack="Back"
CodeCenter="Center"
CodeDownLeft="DownLeft"
CodeDownRight="DownRight"

ScreenOutDelay=1
ShowHelp=false
StopMusicOnBack=true

[ScreenSelectMaster]
Class="ScreenSelectMaster"
Fallback="ScreenWithMenuElements"
StopMusicOnBack=true

[ScreenProfileOptions]
# Class="ScreenSelectMaster"
# Fallback="ScreenSelectMaster"
Class="ScreenSelectProfile"
Fallback="ScreenSelectProfile"

ScreenOnCommand=

# NextScreen=Branch_1st.TitleMenu()
# PrevScreen=Branch_1st.TitleMenu()
# NextScreen=Branch_1st.Caution()

NextScreen="ScreenProfileOptionsSave"
PrevScreen="ScreenSelectProfile"
#
AllowRepeatingInput=true

ShowHeader=true
HeaderX=SCREEN_CENTER_X
HeaderY=SCREEN_TOP
HeaderOnCommand=
HeaderOffCommand=linear,0.25;addy,-100

TimerOnCommand=
TimerOffCommand=linear,0.25;addy,-100

ShowFooter=false
ShowHelp=false

# mk2ultra
ChoiceNames="1,2,3,4"
DefaultChoice="1"
Choice1="name,TopLeft;"
Choice2="name,TopRight;"
Choice3="name,BotLeft;"
Choice4="name,BotRight;"

OptionOrderUp="1:3,3:1,2:4,4:2"
OptionOrderDown="1:3,3:1,2:4,4:2"
OptionOrderLeft="1:2,2:1,3:4,4:3"
OptionOrderRight="1:2,2:1,3:4,4:3"

CodeNames="Start,Select,Back,Up,Down,Left,Right"
CodeSelect="+Select"
CodeStart="Start"
CodeLeft="+Left"
CodeRight="+Right"
CodeBack="Back"
CodeUp="+Up"
CodeDown="+Down"

[ScreenProfileOptionsSave]
Fallback="ScreenProfileSave"
NextScreen="ScreenCaution"

[ScreenProfileSave]
Class="ScreenProfileSave"
Fallback="ScreenWithMenuElementsBlank"
NextScreen=Branch.AfterProfileSave()
PrevScreen=Branch.TitleMenu()
TimerSeconds=-1


[ScreenProfileSaveSummary]
NextScreen="ScreenDataSaveSummary"

[ScreenDataSaveSummary]
ScreenOutDelay=0
ScreenInDelay=0
Fallback="ScreenSplash"
TimerSeconds=20
TimerOnCommand=visible,true
ShowHeader=true
HeaderX=
HeaderY=SCREEN_TOP+38
HeaderOnCommand=addy,-104;sleep,0.396;linear,0.198;addy,104
ShowFooter=true

AllowStartToSkip=true
NextScreen=Branch.AfterDataSaveSummary()
PrevScreen=Branch.AfterDataSaveSummary()
StartScreen=Branch.AfterDataSaveSummary()

[ScreenDataSaveSummaryEnd]
Class="ScreenProfileSave"
Fallback="ScreenProfileSave"
NextScreen=Branch.Ending()
PrevScreen="ScreenGameOver"
TimerSeconds=-1

[ScreenMusicScroll]
Fallback="ScreenAttract"
PlayMusic=true
NextScreen="ScreenGameOver"
PrevScreen="ScreenMusicScroll"

[ScreenGameOver]
NextScreen="ScreenCompany"
TimerSeconds=2.31
ForceTimer=true
TimerStealth=true
PlayMusic=false

[SNDifficultyList]
StartPositionY = 12
ItemSpacingY = 20
LabelPositionX = -20
TickPositionX = 87
IndicatorWidth=236
IndicatorX=41
GlowIfMeterAbove10 = true
PlayerLabelXOffset = 3

[RDGDifficultyList]
StartPositionX = 0
ItemSpacingX = 200
LabelPositionX = -20
TickPositionX = 87
IndicatorWidth=236
IndicatorX=41
GlowIfMeterAbove10 = true
PlayerLabelXOffset = 8

###############
# Online!
###############
[ScreenSMOnlineLogin]
Class="ScreenSMOnlineLogin"
Fallback="ScreenOptionsOnline"
NextScreen=Branch.AfterSMOLogin
PrevScreen=Branch.TitleMenu()
ShowStyleIcon=false
TimerSeconds=-1
ShowHelp=false

[ScreenOptionsOnline]
Fallback="ScreenOptionsServiceChild"
ShowFooter=false
ShowHelp=true
WaitForChildrenBeforeTweeningOut=true

TitleX=SCREEN_LEFT+40
TitleOnCommand=zoom,0.8;halign,0
TitleGainFocusCommand=diffuse,color("#14FE00");
TitleLoseFocusCommand=diffuse,color("#ffffff");

LineHighlightP1OnCommand=zoom,1;x,SCREEN_CENTER_X-60
LineHighlightP1ChangeCommand=visible,true
LineHighlightP1ChangeToExitCommand=visible,false
#
LineHighlightP2OnCommand=zoom,1;x,SCREEN_CENTER_X+120-203
LineHighlightP2ChangeCommand=visible,true
LineHighlightP2ChangeToExitCommand=visible,false

NumRowsShown=6
SeparateExitRow=true
SeparateExitRowY=SCREEN_CENTER_Y+20
ShowExitRow=true

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_BOTTOM-75
ExplanationTogetherOnCommand=shadowlength,0;zoom,0.45;wrapwidthpixels,1300;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening
OptionRowNormalMetricsGroup="OptionRowOnline"

[OptionRowOnline]
Fallback="OptionRowService"

TitleX=SCREEN_LEFT+105
TitleOnCommand=zoom,0.8;halign,0
TitleGainFocusCommand=diffuse,color("#14FE00");
TitleLoseFocusCommand=diffuse,color("#ffffff");

ColorSelected=color("#14FE00")
ColorNotSelected=color("#ffffff")
ColorDisabled=color("0.5,0.5,0.5,1")

ItemsStartX=SCREEN_CENTER_X-110
ItemsEndX=SCREEN_CENTER_X-110
ItemsGapX=14
ItemsMinBaseZoom=0.65
ItemsLongRowSharedX=SCREEN_CENTER_X
ItemOnCommand=uppercase,true;shadowlength,0;zoom,0.8

[ScreenNetSelectBase]
Class="ScreenNetSelectBase"
Fallback="ScreenWithMenuElements"

ChatInputBoxX=SCREEN_CENTER_X*0.5
ChatInputBoxY=SCREEN_CENTER_Y-200
ChatInputBoxOnCommand=bounceend,0.5;diffusealpha,1;
ChatInputBoxOffCommand=bouncebegin,0.5;zoomy,0
ChatInputBoxWidth=SCREEN_CENTER_X*0.9
ChatInputBoxHeight=64
#--#
ChatInputX=(SCREEN_CENTER_X*0.5)*0.125
ChatInputY=SCREEN_CENTER_Y+75
ChatTextInputWidth=500
ChatInputOnCommand=halign,0;valign,0;zoom,0.5;diffusealpha,0;linear,0.55;diffusealpha,1
ChatInputOffCommand=diffusealpha,1;linear,0.5;diffusealpha,0
#
ChatOutputBoxX=
ChatOutputBoxY=
ChatOutputBoxOnCommand=bounceend,0.5;diffusealpha,1
ChatOutputBoxOffCommand=bouncebegin,0.5;zoomy,0
ChatOutputBoxWidth=
ChatOutputBoxHeight=
#--#
ChatOutputX=(SCREEN_CENTER_X*0.5)*0.125
ChatOutputY=SCREEN_CENTER_Y-60
ChatTextOutputWidth=500
ChatOutputLines=12
ChatOutputOnCommand=halign,0;valign,0;zoom,0.5;diffusealpha,0;linear,0.55;diffusealpha,1
ChatOutputOffCommand=diffusealpha,1;linear,0.5;diffusealpha,0
#
#UsersX=SCREEN_LEFT+20
#UsersY=SCREEN_CENTER_Y-172
#UserSpacingX=64
#UserLine2Y=16
#UsersOnCommand=zoom,0.8;halign,0
#UsersOffCommand=linear,0.5;zoom,0
#Users0Command=;diffuse,color("1.0,0.4,0.4,1.0")
#Users1Command=diffuse,color("1.0,1.0,1.0,1.0")
#Users2Command=diffuse,color("0.5,0.5,1.0,1.0")
#Users3Command=diffuse,color("0.5,1.0,0.5,1.0")
#Users4Command=diffuse,color("1.0,0.5,0.5,1.0")
#

[ScreenNetSelectMusic]
UsePlayerSelectMenu=true
SelectMenuAvailable=true
SelectMenuScreenName="ScreenPlayerOptionsPopup"
TimerSeconds=90

IdleCommentSeconds=20
HardCommentMeter=10

SampleMusicLoops=true
SampleMusicFallbackFadeInSeconds=1
SampleMusicFadeOutSeconds=1.5

SampleMusicDelay=1

ShowHeader=true
HeaderY=SCREEN_TOP+38
HeaderOffCommand=decelerate,0.2;addy,-76
HeaderOnCommand=draworder,88;halign,0;addy,-76;sleep,0.264;decelerate,0.2;addy,76

ExplanationX=SCREEN_LEFT+163
ExplanationY=SCREEN_CENTER_Y+141
ExplanationOnCommand=draworder,-1;cropright,1;sleep,0.264;sleep,0.6;linear,0.4;cropright,0
ExplanationOffCommand=sleep,0.033;accelerate,0.363;x,-237

ShowStyleIcon=true
StyleIconX=SCREEN_LEFT+33
StyleIconY=SCREEN_CENTER_Y-83
StyleIconOnCommand=draworder,90;addx,-400;sleep,0.264;decelerate,0.52;addx,400
StyleIconOffCommand=sleep,0.033;accelerate,0.33;addx,-400

ShowHelp=false
DoRouletteOnMenuTimer=true

ShowFooter=true

ShowDifficultyDisplay=false

ShowDifficultyList=true
DifficultyListX=SCREEN_LEFT+120
DifficultyListY=SCREEN_CENTER_Y+100
DifficultyListOnCommand=zoom,0.85;draworder,90;addx,-400;sleep,0.32;addx,400
DifficultyListStartSelectingStepsMessageCommand=finishtweening;accelerate,0.2;zoom,1.1;decelerate,0.2;zoom,1;
DifficultyListOffCommand=sleep,0.033;accelerate,0.363;addx,-400

ShowNewSong=not GAMESTATE:IsCourseMode()
NewSongX=SCREEN_RIGHT-304
NewSongY=SCREEN_CENTER_Y-41
NewSongOnCommand=playcommand,"Set"
NewSongOffCommand=bouncebegin,0.135;visible,false
NewSongShowCommand=finishtweening;visible,true
NewSongHideCommand=finishtweening;visible,false

#MusicWheel
MusicWheelX=SCREEN_RIGHT-166
MusicWheelY=SCREEN_CENTER_Y-16
MusicWheelOnCommand=rotationy,30;zoomx,1.16;addx,SCREEN_WIDTH/640*328;sleep,0.412;linear,0.196;addx,-(SCREEN_WIDTH/640*328)
MusicWheelOffCommand=sleep,0.020;linear,0.255;addx,SCREEN_WIDTH/640*328

#Player Mod Icons
ShowModIcons=false
ModIconsP1OnCommand=visible,false
ModIconsP2OnCommand=visible,false

#Banner
BannerFrameX=SCREEN_LEFT+152
BannerFrameY=SCREEN_CENTER_Y-58
BannerFrameOnCommand=draworder,1;cropbottom,0.5;addx,-400;sleep,0.264;decelerate,0.52;addx,400;
BannerFrameOffCommand=sleep,0.033;accelerate,0.33;addx,-400

BannerX=SCREEN_LEFT+141
BannerY=SCREEN_CENTER_Y-139
BannerOnCommand=draworder,22;scaletoclipped,256,80;addx,-400;sleep,0.264;decelerate,0.52;addx,400
BannerOffCommand=sleep,0.033;accelerate,0.33;addx,-400

#CDTitle
CDTitleX=SCREEN_LEFT+250
CDTitleY=SCREEN_CENTER_Y-120
CDTitleOnCommand=draworder,99;zoom,0.5;addx,-280;sleep,0.450;linear,0.267;addx,274;linear,0.05;addx,-6;decelerate,0.116;addx,12;decelerate,0.067;addx,-4;decelerate,0.1;addx,4
CDTitleOffCommand=accelerate,0.316;addx,-280
CDTitleFrontCommand=spin;effectmagnitude,0,180,0;cullmode,'CullMode_Back'
CDTitleBackCommand=spin;effectmagnitude,0,180,0;cullmode,'CullMode_Front';diffuse,color("#333333")
CDTitleSpinSeconds=2.16

#StageDisplay
ShowStageDisplay=true
StageDisplayX=SCREEN_LEFT+200
StageDisplayY=SCREEN_CENTER_Y-82
StageDisplayOnCommand=draworder,5;addx,-400;sleep,0.264;decelerate,0.52;addx,400
StageDisplayOffCommand=sleep,0.033;accelerate,0.33;addx,-400

#BPMDisplay
ShowBPMDisplay=true
BPMDisplayX=SCREEN_RIGHT-250
BPMDisplayY=SCREEN_CENTER_Y-60
BPMDisplayOnCommand=draworder,5;halign,0;zoom,0.8;addx,400;sleep,0.264;sleep,0.52;addx,-400;
BPMDisplayOffCommand=sleep,0.033;accelerate,0.33;addx,-400

#SortDisplay
ShowSortDisplay=true
SortDisplayX=SCREEN_RIGHT-(SCREEN_WIDTH/6)
SortDisplayY=SCREEN_CENTER_Y-220
SortDisplayOnCommand=addx,380;draworder,89;sleep,0.264;sleep,0.558;decelerate,0.231;addx,-380
SortDisplayOffCommand=accelerate,0.396;addx,380

#GrooveRadar
ShowGrooveRadar=true
GrooveRadarX=SCREEN_RIGHT-140
GrooveRadarY=SCREEN_CENTER_Y-70
GrooveRadarOnCommand=draworder,2;diffusealpha,0;zoom,0.6;addx,-400;sleep,0.1;linear,0.52;diffusealpha,0;addx,400;sleep,0.3;diffusealpha,1
GrooveRadarOffCommand=sleep,0.033;accelerate,0.33;addx,-400

#SongOptions
# Done in Lua
ShowSongOptions=false

#StepsDisplay

#Balloon
BalloonX=SCREEN_RIGHT-240
BalloonY=SCREEN_CENTER_Y-97
BalloonOnCommand=halign,1;;draworder,99;zoomy,0;sleep,0.264;sleep,0.558;decelerate,0.231;zoomy,1;bob;effectmagnitude,0,5,0
BalloonOffCommand=accelerate,0.231;zoomy,0
BalloonShowCommand=diffusealpha,1
BalloonHideCommand=diffusealpha,0

StepsDisplayP1X=
StepsDisplayP1Y=
StepsDisplayP1OnCommand=visible,false
StepsDisplayP1OffCommand=

StepsDisplayP2X=SCREEN_CENTER_X-110
StepsDisplayP2Y=SCREEN_CENTER_Y+150
StepsDisplayP2OnCommand=visible,false
StepsDisplayP2OffCommand=

[StepsDisplayNet]
Fallback="StepsDisplay"

[OnlineMusicWheel]
Fallback="MusicWheel"
# roulette + online causes a sorting issue that should be hammered out first. -aj
ShowRoulette=false
ShowRandom=false
ShowPortal=false

[RoomWheel]
Fallback="MusicWheel"
RoomWheelItemStartOnCommand=
RoomWheelItemFinishOnCommand=
CreateRoomColor=color("0.0,0.9,0.25,1.0")
HighlightOnCommand=draworder,-1

[ScreenNetRoom]
ShowHeader=true
ShowFooter=true
RoomWheelX=SCREEN_RIGHT-166
RoomWheelY=SCREEN_CENTER_Y-16
RoomWheelOnCommand=rotationy,30;zoomx,1.16;
RoomWheelOffCommand=

RoomInfoDisplayX=SCREEN_CENTER_X-160
RoomInfoDisplayY=SCREEN_CENTER_Y+500

[RoomWheelItem]
TextX=-140
TextY=-8
TextOnCommand=halign,0;zoom,0.8;maxwidth,300/0.8;

DescriptionX=-140
DescriptionY=9
DescriptionOnCommand=halign,0;zoom,0.6;maxwidth,300/0.6;

GradeP1X=120
GradeP1Y=-20
GradeP2X=120
GradeP2Y=20


[RoomInfoDisplay]
RoomInfoDisplayOnCommand=zoom,1;diffuse,color("1.0,1.0,1.0,1");y,SCREEN_CENTER_Y;x,(GAMESTATE:IsHumanPlayer(PLAYER_1)) and SCREEN_CENTER_X-170 or SCREEN_CENTER_X+240;
RoomInfoDisplayOffCommand=zoom,0;
DeployDelay=0.5
RoomTitleOnCommand=x,-130;y,-150;zoom,0.6;maxwidth,310;
RoomDescOnCommand=x,-130;y,-138;zoom,0.6;maxwidth,310;
LastRoundOnCommand=x,-130;y,-116;zoom,0.6;maxwidth,310;
SongTitleOnCommand=x,-130;y,-103;zoom,0.6;maxwidth,310;
SongSubTitleOnCommand=x,-130;y,-91;zoom,0.6;maxwidth,310;
SongArtistOnCommand=x,-130;y,-78;zoom,0.6;maxwidth,310;
PlayersOnCommand=x,-130;y,22;zoom,0.6
PlayerListElementX=-130
PlayerListElementY=32
PlayerListElementOffsetX=0
PlayerListElementOffsetY=12
PlayerListElementOnCommand=zoom,0.6

[ScreenNetEvaluation]
UserTier02OrBetterCommand=diffuseshift;effectperiod,0.75;effectcolor1,color("1,0.95,0.8,1");effectcolor2,color("0.8,0.95,1,1")

[ScreenThemeOptions]
Fallback="ScreenOptionsService"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="ThemeGlobal,ThemeSelectMusic,ThemeGameplay"
LineThemeGlobal="gamecommand;screen,ScreenThemeOptionsGlobal;name,ThemeGlobal"
LineThemeSelectMusic="gamecommand;screen,ScreenThemeOptionsSelectMusic;name,ThemeSelectMusic"
LineThemeGameplay="gamecommand;screen,ScreenThemeOptionsGameplay;name,ThemeGameplay"

[ScreenThemeOptionsGlobal]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenThemeOptions"
PrevScreen="ScreenThemeOptions"
LineNames="LightMode,ConvertScoresAndGrades,MenuBG,MenuMusic"
LineLightMode="lua,ThemePrefRow('LightMode')"
LineConvertScoresAndGrades="lua,ThemePrefRow('ConvertScoresAndGrades')"
LineMenuBG="lua,ThemePrefRow('MenuBG')"
LineMenuMusic="lua,ThemePrefRow('MenuMusic')"

[ScreenThemeOptionsSelectMusic]
Fallback="ScreenThemeOptionsGlobal"
LineNames="MusicWheelStyle,DifficultyStyle"
LineMusicWheelStyle="lua,ThemePrefRow('XStyledMusicSelect')"
LineDifficultyStyle="lua,ThemePrefRow('XDifficultyList')"

[ScreenThemeOptionsGameplay]
Fallback="ScreenThemeOptionsGlobal"
LineNames="ComboColorMode,JudgmentHeight,EndlessLevel,SpeedModSource"
LineEndlessLevel="lua,ThemePrefRow('EndlessLevel')"
LineJudgmentHeight="lua,ThemePrefRow('JudgmentHeight')"
LineComboColorMode="lua,ThemePrefRow('ComboColorMode')"
LineSpeedModSource="lua,ThemePrefRow('SpeedModSource')"

[ScreenEvaluationNew]
Class="ScreenWithMenuElements"
Fallback="ScreenWithMenuElements"
TimerSeconds=15

ShowHeader=true
ShowFooter=true
ShowStyleIcon=true

PrepareScreens="ScreenProfileSave"
PersistScreens="ScreenEvaluation,ScreenProfileSave,ScreenSelectMusic"

NextScreen=Branch.AfterEvaluation()
PrevScreen=Branch.AfterEvaluation()

Summary=false

RollingNumbersRowClass="RollingNumbersJudgment"
RollingNumbersScoreClass="RollingNumbers"

JudgmentFrameX=SCREEN_CENTER_X
JudgmentFrameY=SCREEN_CENTER_Y+32

RowW1Frame=0
RowW1Condition=GAMESTATE:ShowW1()
RowW1Value=function(pss) return pss:GetTapNoteScores('TapNoteScore_W1') end
RowW2Frame=1
RowW2Value=function(pss) return pss:GetTapNoteScores('TapNoteScore_W2') end
RowW3Frame=2
RowW3Value=function(pss) return pss:GetTapNoteScores('TapNoteScore_W3') end
RowW4Frame=3
RowW4Value=function(pss) return pss:GetTapNoteScores('TapNoteScore_W4') end
RowW5Frame=4
RowW5Value=function(pss) return pss:GetTapNoteScores('TapNoteScore_W5') end
RowMissFrame=5
RowMissValue=function(pss) return pss:GetTapNoteScores('TapNoteScore_Miss') end
RowHeldFrame=6
RowHeldValue=function(pss) return pss:GetHoldNoteScores('HoldNoteScore_Held') end
RowLetGoFrame=7
RowLetGoValue=function(pss) return pss:GetHoldNoteScores('HoldNoteScore_LetGo') end
RowMaxComboFrame=12
RowMaxComboValue=function(pss) return pss:MaxCombo() end

NumberXOffset=116
GradeXOffset=233
GradeY=SCREEN_CENTER_Y-121
GradeOnCommand=zoom,0;sleep,0.5;zoom,1
GradeOffCommand=linear,0.1;zoom,0
RingYOffset=-9
RingP1XOffset=53
RingP2XOffset=85
ScoreXOffset=-32

BannerX=SCREEN_CENTER_X
BannerY=SCREEN_CENTER_Y-135

PlayerXOffset=250
BadgeYOffset=16

ShowStageDisplay=not GAMESTATE:IsCourseMode()
StageDisplayX=SCREEN_CENTER_X
StageDisplayY=SCREEN_CENTER_Y-90
StageDisplayOnCommand=draworder,62;zoomy,0;addy,-39;sleep,0.25;linear,0.15;zoomy,1;addy,39
StageDisplayOffCommand=linear,0.15;zoomy,0;addy,-39

[ScreenEvaluationNewNormal]
Fallback="ScreenEvaluationNew"
RowsToShow="W1,W2,W3,W4,W5,Miss,Held,LetGo,MaxCombo"

[ScreenEvaluationNewStarter]
Fallback="ScreenEvaluationNew"
RowsToShow="StarterJust,StarterEarly,StarterLate,Miss,Held,LetGo,MaxCombo"

JudgmentFrameY=SCREEN_CENTER_Y

#Miss works the same but uses a different graphic
RowMissFrame=11

RowStarterJustFrame=8
RowStarterJustValue=function(pss) return pss:GetTapNoteScores('TapNoteScore_W1')+pss:GetTapNoteScores('TapNoteScore_W2')+pss:GetTapNoteScores('TapNoteScore_W3') end
RowStarterEarlyFrame=9
RowStarterEarlyValue=function(pss,pn) return pss:GetTapNoteScores('TapNoteScore_W4')+pss:GetTapNoteScores('TapNoteScore_W5')-ScoringInfo.lates[pn] end
RowStarterLateFrame=10
RowStarterLateValue=function(_,pn) return ScoringInfo.lates[pn] end

[ScreenEvaluationNewSummary]
Fallback="ScreenEvaluationNewNormal"

NextScreen=Branch.AfterSummary
PrevScreen=Branch.AfterSummary

Summary=true
StageSpacing=16